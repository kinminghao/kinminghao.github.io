<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ—¢ç„¶æ¥äº†å°±ååå§</title>
  
  <link href="//atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-05-30T12:53:29.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>kin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java8 : Optional è§£æ</title>
    <link href="http://yoursite.com/2017/05/30/Java8-Optional-%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2017/05/30/Java8-Optional-è§£æ/</id>
    <published>2017-05-30T06:08:27.000Z</published>
    <updated>2017-05-30T12:53:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªå¤ä»¥æ¥, Java å¼€å‘è€…ä»¬éƒ½ä¼šé‡åˆ°ä¸€ä¸ªè®©äººåˆçˆ±åˆæ¨çš„å¼‚å¸¸: <code>NullPointException</code>, ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, Java8 ä¸­æ–°å¼•å…¥äº†ä¸€ä¸ªå·¥å…·å«åš <code>Optional</code> ,æ˜¯ç”¨æ¥å­˜å‚¨å¯¹è±¡å¹¶ä¸”å»è§£å†³ç©ºå¯¹è±¡é—®é¢˜çš„åŒ…è£…ç±», ç”¨ä»¥é¿å…äº§ç”Ÿ Java ä¸­çš„ç©ºæŒ‡é’ˆå¼‚å¸¸.<br><a id="more"></a></p>
<h1 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> T value;</div></pre></td></tr></table></figure>
<p>Optional å¯¹è±¡ä¸­åŒ…è£…ç€ä¸€ä¸ªæ³›å‹æ–¹æ³•çš„å¯¹è±¡, å½“æˆ‘ä»¬åœ¨åŒ…è£…ç±»ä¸­å­˜æ”¾ç€å¯¹åº”çš„æ–¹æ³•çš„æ—¶å€™, æˆ‘ä»¬å¯ä»¥æ£€éªŒè¿™ä¸ªå€¼æ˜¯å¦å­˜åœ¨,å¹¶ä¸”åœ¨é€‚å½“çš„æ—¶å€™å–å‡ºè¿™ä¸ªå€¼æ¥.<br></p>
<h1 id="äº§ç”Ÿå¯¹è±¡"><a href="#äº§ç”Ÿå¯¹è±¡" class="headerlink" title="äº§ç”Ÿå¯¹è±¡"></a>äº§ç”Ÿå¯¹è±¡</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Optional&lt;T&gt; <span class="title">of</span><span class="params">(T value)</span></span>;</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Optional&lt;T&gt; <span class="title">ofNullable</span><span class="params">(T value)</span></span>;</div></pre></td></tr></table></figure>
<p>Optional å¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•:</p>
<ul>
<li><code>of</code> æ–¹æ³•æä¾›ä¸€ä¸ªæ„é€ æ–¹æ³•, ä¼šå°†ä¼ å…¥çš„å¯¹è±¡å¼•å…¥ <code>Optional</code> ç±»çš„æ„é€ æ–¹æ³•ä¸­, é»˜è®¤æ„é€ æ–¹æ³•ä¼šåœ¨è°ƒç”¨æ—¶æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸º null , <strong><em>å¦‚æœä¸ºç©ºçš„è¯,å°†ä¼šæŠ›å‡ºä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸</em></strong>.</li>
<li><code>ofNullable</code> æ–¹æ³•åœ¨è°ƒç”¨æ„é€ å™¨ä¹‹å‰ä¼šæä¾›ä¸€ä¸ªäº‹å‰æ£€æŸ¥,å¦‚æœä¼ å…¥çš„å¯¹è±¡ä¸ºç©ºçš„è¯,åˆ™ä¼šè‡ªåŠ¨è¿”å›ä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡,å¦‚æœä¼ å…¥å¯¹è±¡ä¸ä¸ºç©ºçš„è¯,åˆ™  <strong><em>è¿”å›ä¸€ä¸ªåŒ…å«ç€è¯¥å¯¹è±¡çš„åŒ…è£…ç±»</em></strong> .</li>
</ul>
<h1 id="æ£€æŸ¥å¯¹è±¡"><a href="#æ£€æŸ¥å¯¹è±¡" class="headerlink" title="æ£€æŸ¥å¯¹è±¡"></a>æ£€æŸ¥å¯¹è±¡</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPresent</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ifPresent</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; consumer)</span></span>;</div></pre></td></tr></table></figure>
<ul>
<li><code>isPresent</code> æ–¹æ³•è¿”å›å¯¹è±¡æ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨åˆ™è¿”å› <code>true</code> å¦åˆ™è¿”å› <code>false</code> </li>
<li><code>ifPresent</code> æ–¹æ³•ä¼ å…¥ä¸€ä¸ªæ¶ˆè´¹å‡½æ•°, å½“å¯¹åº”çš„å€¼å­˜åœ¨çš„æ—¶å€™, åˆ™å»æ‰§è¡Œå¯¹åº”çš„æ¶ˆè´¹å‡½æ•°å†…å®¹.</li>
</ul>
<h1 id="è·å–å¯¹è±¡"><a href="#è·å–å¯¹è±¡" class="headerlink" title="è·å–å¯¹è±¡"></a>è·å–å¯¹è±¡</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">orElse</span><span class="params">(T other)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">orElseGet</span><span class="params">(Supplier&lt;? extends T&gt; other)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;X extends Throwable&gt; <span class="function">T <span class="title">orElseThrow</span><span class="params">(Supplier&lt;? extends X&gt; exceptionSupplier)</span> <span class="keyword">throws</span> X</span>;</div></pre></td></tr></table></figure>
<ul>
<li><code>get</code> æ–¹æ³•å°†ä¼šæ£€æŸ¥åŒ…è£…ç±»çš„å€¼,å¦‚æœä¸ºç©ºçš„è¯åˆ™æŠ›å‡ºä¸€ä¸ª <code>NoSuchElementException</code> å¼‚å¸¸. ä¸ä¸ºç©ºçš„è¯å°±è¿”å›å¯¹åº”çš„å¯¹è±¡å†…å®¹.</li>
<li><code>orElse</code> æ–¹æ³•å’Œ <code>get</code> æ–¹æ³•ä¸€æ ·,ä¼šæ£€æŸ¥å†…å®¹æ˜¯å¦å­˜åœ¨å¹¶ä¸”è¿”å›å¯¹è±¡,ä½†æ˜¯æœ‰æ‰€ä¸åŒçš„å†…å®¹æ˜¯, å½“å†…å®¹ä¸ºç©ºçš„æ—¶å€™å°†ä¼šè¿”å›é»˜è®¤çš„ <code>other</code> çš„å¯¹è±¡.</li>
<li><code>orElseGet</code> æ–¹æ³•ä¼ å…¥ä¸€ä¸ªç”Ÿäº§å‡½æ•°,å’Œ <code>orElse</code> æ–¹æ³•ç±»ä¼¼,å½“å¯¹è±¡å†…å®¹ä¸ºç©ºçš„æ—¶å€™ä¼šè‡ªåŠ¨çš„è°ƒç”¨ç”Ÿäº§å‡½æ•°çš„å†…å®¹,å¹¶ä¸”å°†å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡è¿”å›ç»™æ–¹æ³•.</li>
<li><code>orElseThrow</code> æ–¹æ³•ä¼ å…¥ä¸€ä¸ªç”Ÿäº§ä¸€ä¸ªç»§æ‰¿è‡ª <code>Throwable</code> çš„ç”Ÿäº§å‡½æ•°, å½“å¯¹è±¡å†…å®¹ä¸ºç©ºçš„æ—¶å€™è°ƒç”¨ç”Ÿäº§å‡½æ•°çš„æ–¹æ³•, å¹¶ä¸”å°†ç”Ÿäº§å‡ºæ¥çš„ <code>Throwable</code> å¯¹è±¡æŠ›å‡º.</li>
</ul>
<h1 id="å¤„ç†å¯¹è±¡"><a href="#å¤„ç†å¯¹è±¡" class="headerlink" title="å¤„ç†å¯¹è±¡"></a>å¤„ç†å¯¹è±¡</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Optional&lt;T&gt; <span class="title">filter</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; predicate)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span>&lt;U&gt; Optional&lt;U&gt; <span class="title">map</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends U&gt; mapper)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span>&lt;U&gt; Optional&lt;U&gt; <span class="title">flatMap</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, Optional&lt;U&gt;&gt; mapper)</span></span>;</div></pre></td></tr></table></figure>
<ul>
<li><code>filter</code> è¿‡æ»¤å™¨æ–¹æ³•ä¼ å…¥ä¸€ä¸ªåˆ¤æ–­å‡½æ•°, å¦‚æœ Optional å¯¹è±¡ä¸­ä¸åŒ…å«ä»»ä½•å…ƒç´ , <code>filter</code> æ–¹æ³•è¿”å›ä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡, å¦‚æœè°ƒç”¨å‡½æ•°è¿”å›ä¸€ä¸ª <code>false</code>, åˆ™ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡, å¦‚æœè¿”å› <code>true</code>, åˆ™ä¼šå¾—åˆ°ç°åœ¨çš„ Optional å¯¹è±¡.</li>
<li><code>map</code> æ–¹æ³•ä¼ å…¥ä¸€ä¸ª <code>Function</code> å‡½æ•°, å¹¶ä¸”å–çš„å…¶ä¸­çš„å†…å®¹, å¹¶å¯¹å†…å®¹æ‰§è¡Œè¯¥å‡½æ•°,è¿”å›ç»“æœæ”¾å…¥ä¸€ä¸ªæ–°çš„ Optional å¯¹è±¡ä¸­. å¦‚æœåŸæœ‰å¯¹è±¡æ˜¯ç©ºçš„,é‚£ä¹ˆæˆ‘ä»¬å°†ä¼šè·å¾—ä¸€ä¸ªç©ºçš„å¯¹è±¡.</li>
<li><code>flatMap</code> æ–¹æ³•ä¹Ÿä¼ å…¥ä¸€ä¸ª <code>Function</code> å‡½æ•°,ä½†æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª <code>V -&gt; Optional&lt;U&gt;</code> çš„å‡½æ•°.å®ƒçš„å®ç°å’Œ <code>map</code> æ–¹æ³•ç›¸åŒ.ä½†æ˜¯è¿”å›å€¼æ˜¯ä¸€ä¸ª <code>Optional&lt;U&gt;</code> è€Œä¸æ˜¯ä¸€ä¸ª <code>Optional&lt;Optional&lt;U&gt;&gt;</code>.</li>
</ul>
<hr>
<p>Optional å¯¹è±¡ååˆ†é€‚åˆäºåŒ…è£…å„ç§ä¸ç¡®å®šçš„è¿”å›æ•°æ®. ä½†æ˜¯å…¶ä½¿ç”¨æ–¹å¼ä¸æ˜¯æ¯æ¬¡éƒ½è·å–å…¶ä¸­çš„å…·ä½“å†…å®¹,æˆ–è€…æ¯æ¬¡è°ƒç”¨ <code>get</code> æˆ–è€… <code>isPresent</code> æ–¹æ³•æ¥ç¡®è®¤å†…å®¹æ˜¯å¦å­˜åœ¨.è€Œæ˜¯ç»å¸¸è°ƒç”¨ <code>filter</code>, <code>map</code> ç­‰æ–¹æ³•ç›´æ¥å¯¹å†…å®¹è¿›è¡Œæ“ä½œ.ç›´åˆ°è·å¾—æœ€åçš„å€¼.<br>å…·ä½“çš„å®ç°éå¸¸ç±»ä¼¼å…¶ä»–å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç²¾é«“.æˆ‘ä»¬å¯ä»¥ä»ä¸­è·å–å‚è€ƒ.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è‡ªå¤ä»¥æ¥, Java å¼€å‘è€…ä»¬éƒ½ä¼šé‡åˆ°ä¸€ä¸ªè®©äººåˆçˆ±åˆæ¨çš„å¼‚å¸¸: &lt;code&gt;NullPointException&lt;/code&gt;, ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, Java8 ä¸­æ–°å¼•å…¥äº†ä¸€ä¸ªå·¥å…·å«åš &lt;code&gt;Optional&lt;/code&gt; ,æ˜¯ç”¨æ¥å­˜å‚¨å¯¹è±¡å¹¶ä¸”å»è§£å†³ç©ºå¯¹è±¡é—®é¢˜çš„åŒ…è£…ç±», ç”¨ä»¥é¿å…äº§ç”Ÿ Java ä¸­çš„ç©ºæŒ‡é’ˆå¼‚å¸¸.&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Optional" scheme="http://yoursite.com/tags/Optional/"/>
    
  </entry>
  
  <entry>
    <title>HashMapè§£æ</title>
    <link href="http://yoursite.com/2017/05/18/HashMap%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2017/05/18/HashMapè§£æ/</id>
    <published>2017-05-18T13:56:15.000Z</published>
    <updated>2017-05-19T02:01:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h1><p><code>HashMap</code> æ˜¯æˆ‘ä»¬åœ¨ java ä¸­æœ€é¢‘ç¹å‡ºç°çš„ä¸€ç§æ•°æ®å­˜å‚¨å·¥å…·. å®ƒä»¥ é”®-å€¼ å¯¹çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®,ä½œä¸ºä¸€ä¸ªé«˜æ•ˆå­˜å‚¨å·¥å…·,å®ƒå¾ˆé¢‘ç¹çš„å—åˆ°äº†æˆ‘ä»¬çš„ä½¿ç”¨.<br>ä½†æ˜¯å…¶å†…éƒ¨å®ç°åŸç†å¾ˆå¤šäººéƒ½ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥š,åœ¨è¿™é‡Œæˆ‘ä»¬ä¸€èµ·ç ”ç©¶ä¸€ä¸‹.</p>
<h1 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h1><ul>
<li><code>table</code>:ä½¿ç”¨ <code>Node&lt;K,V&gt;</code> å¯¹è±¡è¿›è¡Œæ•°æ®çš„å­˜å‚¨æ˜¯ä¸€ä¸ªé“¾è¡¨,å®ƒæœ‰å››ä¸ªå±æ€§,åˆ†åˆ«æ˜¯ å“ˆå¸Œå€¼, key, value, æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ.</li>
<li><code>entrySet</code>: é”®å€¼å¯¹çš„é›†åˆæ¥å­˜å‚¨å¯¹åº”çš„é›†åˆæ•°æ®.</li>
<li><code>size</code>: è¡¨ç¤ºé”®å€¼å¯¹é›†åˆçš„å¤§å°</li>
<li><code>modCount</code> ä¿®æ”¹æ¬¡æ•°,å’Œ <code>ArrayList</code> ç±»ä¼¼,è¡¨ç¤ºä¿®æ”¹æ¬¡æ•°,ç”¨ä»¥ç¡®ä¿åŒæ­¥.</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç®€è¿°&quot;&gt;&lt;a href=&quot;#ç®€è¿°&quot; class=&quot;headerlink&quot; title=&quot;ç®€è¿°&quot;&gt;&lt;/a&gt;ç®€è¿°&lt;/h1&gt;&lt;p&gt;&lt;code&gt;HashMap&lt;/code&gt; æ˜¯æˆ‘ä»¬åœ¨ java ä¸­æœ€é¢‘ç¹å‡ºç°çš„ä¸€ç§æ•°æ®å­˜å‚¨å·¥å…·. å®ƒä»¥ é”®-å€¼ å¯¹çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®,ä½œä¸ºä¸€ä¸ªé«˜
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Map" scheme="http://yoursite.com/tags/Map/"/>
    
  </entry>
  
  <entry>
    <title>LocalDateTime ç®€è¿°</title>
    <link href="http://yoursite.com/2017/05/16/LocalDateTime-%E7%AE%80%E8%BF%B0/"/>
    <id>http://yoursite.com/2017/05/16/LocalDateTime-ç®€è¿°/</id>
    <published>2017-05-16T09:21:56.000Z</published>
    <updated>2017-05-17T14:11:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>Java 8 æ›´æ–°çš„éƒ¨åˆ†å†…å®¹ä¸­,æœ‰ä¸€éƒ¨åˆ†ä»£æ›¿äº†ä»¥å¾€æ¯”è¾ƒéš¾ç”¨çš„ java.util.Date ç±»,å¹¶ä¸”åˆ›å»ºäº†ä¸€å¥—æ–°çš„æ—¶é—´ç±»å‹,è¯¥ç±»å‹ä¸º: java.time.LocalDateTime.<br><code>LocalDateTime</code> æä¾›äº†è®¸å¤šæ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨,</p>
<h1 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">java.time.LocalDate</div><div class="line">java.time.LocalTime</div><div class="line">java.time.LocalDateTime</div><div class="line">java.time.ZoneId</div><div class="line">java.time.format.DateTimeFormatter</div></pre></td></tr></table></figure>
<p>java.time åŒ…ä¸­æä¾›çš„å·¥å…·æ–¹æ³•å’Œç±»éå¸¸ä¹‹å¤š,ä½†æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™åŸºæœ¬ä¸Šå¾ˆéš¾ç”¨åˆ°è¿™é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•,å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ç”šè‡³åªäº†è§£å…¶ä¸­çš„ä¸‰åˆ†ä¹‹ä¸€.<br><a id="more"></a><br>è¿™äº›åŒ…ä¸­, <code>LocalDate</code> è¡¨ç¤ºæ—¥æœŸ, <code>LocalTime</code> è¡¨ç¤ºæ—¶é—´, <code>LocalDateTime</code> è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„ç»„åˆ.<br><code>ZoneId</code> è¡¨ç¤ºæ—¶åŒº,ä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ <code>ZoneId.systemDefault()</code> è·å–å½“å‰ç³»ç»Ÿé»˜è®¤çš„æ—¶åŒº.å½“ç„¶,å­˜åœ¨ç³»ç»Ÿæ—¶åŒºä¸æ­£å¸¸çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ZoneId.of(&quot;Asia/Shanghai&quot;)</code> çš„æ–¹æ³•æ¥é¿å….<br><code>DateTimeFormatte</code> åŒ…å«äº†è®¸å¤š<code>DateTimeFormatte</code>ç±»å‹çš„é™æ€å˜é‡,å®ƒæ”¯æŒå„ç§ç±»å‹çš„æ—¥æœŸå’Œå­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢,å…·ä½“çš„æƒ…å†µæˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨é‡Šæ¥æŸ¥çœ‹.</p>
<h1 id="åŸºæœ¬æ–¹æ³•"><a href="#åŸºæœ¬æ–¹æ³•" class="headerlink" title="åŸºæœ¬æ–¹æ³•"></a>åŸºæœ¬æ–¹æ³•</h1><p>æˆ‘ä»¬å¯¹äºæ—¶é—´æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯è·å–æ—¶é—´,æ—¶é—´å’Œå­—ç¬¦ä¸²çš„è½¬æ¢,ä»¥åŠè®¡ç®—æ—¶é—´.<br>æ—¶é—´å¯¹è±¡å·²ç»è‡ªå¸¦äº†å¾ˆå¤šçš„æ¯”è¾ƒ,è®¡ç®—çš„æ–¹æ³•,ç›¸å½“æ˜¾è€Œæ˜“è§,æ‰€ä»¥åœ¨è¿™é‡Œä¸åŠ èµ˜è¿°,å¤§å®¶å¯ä»¥ç›´æ¥è¿›è¡Œè°ƒç”¨.</p>
<h2 id="è·å–æ—¶é—´"><a href="#è·å–æ—¶é—´" class="headerlink" title="è·å–æ—¶é—´"></a>è·å–æ—¶é—´</h2><p><code>LocalDate</code> <code>LocalTime</code> <code>LocalDateTime</code> ä¸‰ä¸ªå·¥å…·åˆ†åˆ«è¡¨ç¤ºå¯¹åº”çš„æ—¶é—´,ä»–ä»¬éƒ½æœ‰ä¸€äº›ç±»ä¼¼çš„æ–¹æ³•,æ¯”å¦‚:</p>
<ul>
<li><code>now</code> æ–¹æ³•éƒ½ä¼šè·å–åˆ°å½“å‰çš„æ—¶é—´.éƒ½æœ‰ <code>MIN</code>,<code>MAX</code> å±æ€§,è¡¨ç¤ºæœ€å¤§å’Œæœ€å°çš„æ—¶é—´. </li>
<li><p><code>of</code> æ–¹æ³•ä¼šè¦æ±‚ä¼ å…¥å¯¹åº”çš„ å¹´æœˆæ—¥æ—¶åˆ†ç§’ çš„ä¿¡æ¯,æ¥è¿”å›å¯¹åº”çš„æ—¶é—´.<br>è¿˜æœ‰ä¸€äº›æ¯”è¾ƒæœ‰è¶£çš„æ–¹æ³•æ¯”å¦‚:<br><code>LocalDate</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalDate <span class="title">ofYearDay</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> dayOfYear)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalDate <span class="title">ofEpochDay</span><span class="params">(<span class="keyword">long</span> epochDay)</span></span>;</div></pre></td></tr></table></figure>
</li>
<li><p><code>ofYearDay</code> è¡¨ç¤ºæŸä¸€å¹´çš„ç¬¬å‡ å¤©,å®ƒä¼šè®¡ç®—å¥½å¯¹åº”çš„å¤©æ•°å¹¶ä¸”è¿”å›å¯¹åº”çš„æ—¥æœŸ.</p>
</li>
<li><code>ofEpochDay</code> è¡¨ç¤ºä» <strong><em>1970-01-01</em></strong> å¼€å§‹è®¡ç®—ä¹‹åçš„ç¬¬å‡ å¤©çš„æ—¥æœŸ.</li>
</ul>
<p><code>LocalTime</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">ofSecondOfDay</span><span class="params">(<span class="keyword">long</span> secondOfDay)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">ofNanoOfDay</span><span class="params">(<span class="keyword">long</span> nanoOfDay)</span></span>;</div></pre></td></tr></table></figure></p>
<ul>
<li><code>ofSecondOfDay</code> è¡¨ç¤ºä»ä¸€å¤©å¼€å§‹çš„ä»¥ç§’è®¡æ—¶çš„æ—¶é—´.</li>
<li><code>ofNanoOfDay</code> è¡¨ç¤ºä»ä¸€å¤©çš„å¼€å§‹çš„ä»¥çº³ç§’è®¡æ—¶çš„æ—¶é—´.</li>
</ul>
<p>å½“ç„¶, <code>LocalDateTime</code> ä¹Ÿæœ‰ä¸€ä¸ªåä¸º <code>ofEpochSecond</code> çš„æ–¹æ³•å¯ä»¥è¿”å›ä»  <strong><em>1970-01-01 00:00:00</em></strong> å¼€å§‹è®¡æ—¶çš„ä»¥ç§’è®¡æ—¶çš„å…·ä½“çš„æ—¶é—´æ—¥æœŸ,ä½†æ˜¯æˆ‘ç›®å‰æ²¡æƒ³åˆ°æœ‰ä»€ä¹ˆç”¨å¤„.</p>
<h3 id="å®Œæ•´æ—¶é—´"><a href="#å®Œæ•´æ—¶é—´" class="headerlink" title="å®Œæ•´æ—¶é—´"></a>å®Œæ•´æ—¶é—´</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„æ–¹æ³•è·å–å¯¹åº”çš„æ—¶é—´.<br>æ¯”å¦‚:<br><code>LocalDate</code> æœ‰ä¸€ä¸ªæœ€ç®€å•çš„ <code>atTime</code> æ–¹æ³•å¯ä»¥ä¼ å…¥å¯¹åº”çš„ <code>LocalTime</code> å¯¹è±¡è·å–å®Œæ•´çš„æ—¶é—´. æˆ–è€…å¯ä»¥é€‰æ‹© <code>atStartOfDay</code> æ–¹æ³•æ¥è·å–è¿™ä¸€å¤©çš„å¼€å§‹æ—¶é—´.</p>
<p><code>LocalTime</code> åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>atDate</code> æ–¹æ³•æ¥è·å–å®Œæ•´æ—¶é—´.</p>
<p>æˆ–è€…æˆ‘ä»¬å¯ä»¥è°ƒç”¨ <code>LocalDateTime</code> æ–¹æ³•çš„ <code>of</code> æ–¹æ³•æ¥ä¼ å…¥ <code>LocalDate</code> å’Œ <code>LocalTime</code> å¯¹è±¡æ¥è·å¾—å¯¹åº”çš„æ—¶é—´.</p>
<h1 id="å­—ç¬¦ä¸²è½¬æ¢"><a href="#å­—ç¬¦ä¸²è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ¢"></a>å­—ç¬¦ä¸²è½¬æ¢</h1><h2 id="å­—ç¬¦ä¸²-gt-æ—¶é—´"><a href="#å­—ç¬¦ä¸²-gt-æ—¶é—´" class="headerlink" title="å­—ç¬¦ä¸² -&gt; æ—¶é—´"></a>å­—ç¬¦ä¸² -&gt; æ—¶é—´</h2><p>parse å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„æ—¶é—´ç±»å‹.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LocalDate date = LocalDate.parse(<span class="string">"2017-02-12"</span>);</div><div class="line">LocalTime time = LocalTime.parse(<span class="string">"12:23:52"</span>);</div></pre></td></tr></table></figure>
<p>é™¤äº†è¿™ä¸ªæˆ‘ä»¬è¿˜å¯ä»¥åŒæ—¶ä¼ å…¥å¯¹åº”çš„ Formatter, è¿™ä¸ªæˆ‘ä»¬ä¼šåœ¨æœ¬æ–‡æœ«å°¾æåŠ.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LocalDate date = LocalDate.parse(<span class="string">"19870412"</span>, DateTimeFormatter.BASIC_ISO_DATE);</div></pre></td></tr></table></figure>
<h2 id="æ—¶é—´-gt-å­—ç¬¦ä¸²"><a href="#æ—¶é—´-gt-å­—ç¬¦ä¸²" class="headerlink" title="æ—¶é—´ -&gt; å­—ç¬¦ä¸²"></a>æ—¶é—´ -&gt; å­—ç¬¦ä¸²</h2><p>format æ–¹æ³•å¯ä»¥å°†æ—¶é—´è½¬æ¢æˆå­—ç¬¦ä¸².</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ZonedDateTime dateTime = ZonedDateTime.now();</div><div class="line">DateTimeFormatter formatter = DateTimeFormatter.RFC_1123_DATE_TIME;</div><div class="line">dateTime.format(formatter);</div><div class="line">formatter.format(dateTime);</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦å¯¹åº”çš„æ—¶é—´å¯¹è±¡ä»¥åŠæ ¼å¼åŒ–å¯¹è±¡,ä¹‹åæˆ‘ä»¬å¯ä»¥å¯¹ä»»ä½•ä¸€ä¸ªå¯¹è±¡è¿›è¡Œ <code>format</code> æ ¼å¼åŒ–.</p>
<h1 id="DateTimeFormatter"><a href="#DateTimeFormatter" class="headerlink" title="DateTimeFormatter"></a>DateTimeFormatter</h1><p>è¿™é‡Œæˆ‘ä»¬åªæè¿°æœ‰å…³ <code>DateTimeFormatter</code> çš„é™æ€å±æ€§:</p>
<ul>
<li><code>ISO_LOCAL_DATE</code> æ—¥æœŸ: ä¾‹å­: 2011-12-03</li>
<li><code>ISO_OFFSET_DATE</code> æ—¥æœŸ: ä¾‹å­: 2011-12-03+01:00</li>
<li><code>ISO_DATE</code> æ—¥æœŸ: ä¾‹å­: 2011-12-03 æˆ–è€… 2011-12-03+01:00</li>
<li><code>ISO_LOCAL_TIME</code> æ—¶é—´: ä¾‹å­: 10:15 æˆ–è€… 10:15:30</li>
<li><code>ISO_OFFSET_TIME</code> å¸¦æ—¶åŒºæ—¶é—´: ä¾‹å­: 10:15+01:00 æˆ–è€… 10:15:30+01:00â€™</li>
<li><code>ISO_TIME</code> æ—¶é—´: ä¾‹å­: 10:15 æˆ–è€… 10:15:30 æˆ–è€… 10:15:30+01:00</li>
<li><code>ISO_LOCAL_DATE_TIME</code> å®Œæ•´æ—¶é—´: ä¾‹å­: 2011-12-03T10:15:30</li>
<li><code>ISO_OFFSET_DATE_TIME</code> å¸¦æ—¶åŒºå®Œæ•´æ—¶é—´: ä¾‹å­: 2011-12-03T10:15:30+01:00</li>
<li><code>ISO_ZONED_DATE_TIME</code> å¸¦æ—¶åŒºå¸¦åœ°åŒºå®Œæ•´æ—¶é—´: ä¾‹å­: 2011-12-03T10:15:30+01:00[Europe/Paris]</li>
<li><code>ISO_DATE_TIME</code> å®Œæ•´æ—¶é—´: ä¾‹å­: 2011-12-03T10:15:30 æˆ–è€… 2011-12-03T10:15:30+01:00 æˆ–è€…2011-12-03T10:15:30+01:00[Europe/Paris]</li>
<li><code>ISO_ORDINAL_DATE</code> å¤©æ•°çš„æ—¥æœŸ: ä¾‹å­: 2012-337 </li>
<li><code>ISO_WEEK_DATE</code> æŒ‰å‘¨çš„æ—¥æœŸ: ä¾‹å­: 2012-W48-6</li>
<li><code>ISO_INSTANT</code> å®Œæ•´æ—¶é—´: ä¾‹å­: 2011-12-03T10:15:30Z</li>
<li><code>BASIC_ISO_DATE</code> æ—¥æœŸ: ä¾‹å­: 20111203</li>
<li><code>RFC_1123_DATE_TIME</code> å®Œæ•´æ—¶é—´ ä¾‹å­: Tue, 3 Jun 2008 11:05:30 GMT</li>
</ul>
<p><strong><em>è½¬æ¢æ—¶é—´çš„æ—¶å€™å¦‚æœæ˜¯å¸¦æœ‰æ—¶åŒºçš„ formatter æˆ‘ä»¬éœ€è¦ä½¿ç”¨ ZoneDateTime.</em></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Java 8 æ›´æ–°çš„éƒ¨åˆ†å†…å®¹ä¸­,æœ‰ä¸€éƒ¨åˆ†ä»£æ›¿äº†ä»¥å¾€æ¯”è¾ƒéš¾ç”¨çš„ java.util.Date ç±»,å¹¶ä¸”åˆ›å»ºäº†ä¸€å¥—æ–°çš„æ—¶é—´ç±»å‹,è¯¥ç±»å‹ä¸º: java.time.LocalDateTime.&lt;br&gt;&lt;code&gt;LocalDateTime&lt;/code&gt; æä¾›äº†è®¸å¤šæ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨,&lt;/p&gt;
&lt;h1 id=&quot;åŸºæœ¬ç±»å‹&quot;&gt;&lt;a href=&quot;#åŸºæœ¬ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬ç±»å‹&quot;&gt;&lt;/a&gt;åŸºæœ¬ç±»å‹&lt;/h1&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;java.time.LocalDate&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java.time.LocalTime&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java.time.LocalDateTime&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java.time.ZoneId&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java.time.format.DateTimeFormatter&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;java.time åŒ…ä¸­æä¾›çš„å·¥å…·æ–¹æ³•å’Œç±»éå¸¸ä¹‹å¤š,ä½†æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™åŸºæœ¬ä¸Šå¾ˆéš¾ç”¨åˆ°è¿™é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•,å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ç”šè‡³åªäº†è§£å…¶ä¸­çš„ä¸‰åˆ†ä¹‹ä¸€.&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Date" scheme="http://yoursite.com/tags/Date/"/>
    
  </entry>
  
  <entry>
    <title>LinkedListè§£æ</title>
    <link href="http://yoursite.com/2017/05/13/LinkedList%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2017/05/13/LinkedListè§£æ/</id>
    <published>2017-05-13T02:35:37.000Z</published>
    <updated>2017-05-13T06:51:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æˆ‘ä»¬è¯´ä¸€ä¸‹ <code>LinkedList</code> ,åœ¨åˆ—è¡¨çš„ä½¿ç”¨ä¸­,æˆ‘ä»¬å¾ˆå¤šæ—¶å€™ä¼šçº ç»“äºåˆ—è¡¨çš„é€‰æ‹©,æ˜¯é€‰æ‹©æ•°ç»„å®ç°çš„ <code>ArrayList</code> è¿˜æ˜¯é€‰æ‹©é“¾è¡¨å®ç°çš„ <code>LinkedList</code>.</p>
<h1 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h1><p>åˆ—è¡¨çš„åŸºæœ¬å±æ€§æœ‰ä¸‰ä¸ª,å’Œ <code>ArrayList</code> ç±»ä¼¼,ç¬¬ä¸€ä¸ªå±æ€§æ˜¯:<br><a id="more"></a></p>
<h2 id="åˆ—è¡¨å¤§å°"><a href="#åˆ—è¡¨å¤§å°" class="headerlink" title="åˆ—è¡¨å¤§å°"></a>åˆ—è¡¨å¤§å°</h2><p>ç”¨æ¥è¡¨ç¤ºåˆ—è¡¨å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°,<br>é“¾è¡¨çš„æ‰©å®¹éå¸¸è‡ªç”±,æ‰€ä»¥å®ƒçš„åˆå§‹åŒ–å®¹é‡æ˜¯0<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</div></pre></td></tr></table></figure></p>
<h2 id="ä¸¤ä¸ªæ•°æ®å…ƒç´ "><a href="#ä¸¤ä¸ªæ•°æ®å…ƒç´ " class="headerlink" title="ä¸¤ä¸ªæ•°æ®å…ƒç´ "></a>ä¸¤ä¸ªæ•°æ®å…ƒç´ </h2><p><code>LinkedList</code> æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨,æ‰€ä»¥å®ƒæœ‰ä¸¤ä¸ªé‡è¦å…ƒç´ ,å°±æ˜¯<strong><em>å¤´</em></strong>å’Œ<strong><em>å°¾</em></strong>.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</div><div class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</div></pre></td></tr></table></figure></p>
<p> å…¶ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>Node</code> å¯¹è±¡.<br> è¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„å¯¹è±¡,å®ƒæœ‰ç€å…ƒç´ å†…å®¹,å‰åçš„å…ƒç´ çš„å¼•ç”¨.<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</div><div class="line">    E item;</div><div class="line">    Node&lt;E&gt; next;</div><div class="line">    Node&lt;E&gt; prev;</div><div class="line"></div><div class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</div><div class="line">        <span class="keyword">this</span>.item = element;</div><div class="line">        <span class="keyword">this</span>.next = next;</div><div class="line">        <span class="keyword">this</span>.prev = prev;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="è°ƒæ•´é“¾è¡¨"><a href="#è°ƒæ•´é“¾è¡¨" class="headerlink" title="è°ƒæ•´é“¾è¡¨"></a>è°ƒæ•´é“¾è¡¨</h1><p><code>LinkedList</code> æä¾›å‡ ä¸ªå†…éƒ¨çš„è°ƒæ•´æ–¹æ³•,æ¯”å¦‚:åœ¨æœ€å‰é¢æ–°å¢,åœ¨æœ€åæ–°å¢,åœ¨æŸä¸ªå…ƒç´ å‰é¢æ–°å¢,ç§»é™¤æœ€å‰é¢çš„,ç§»é™¤æœ€åé¢çš„,ç§»é™¤æŸä¸ªå…ƒç´ .<br>è¿™äº›æ“ä½œåŸºæœ¬ä¸Šæ˜¯å¯¹äºé“¾è¡¨ä¸­ç‚¹çš„å¼•ç”¨çš„è°ƒæ•´,æ¥å®ç°è¿™äº›ä¸ªæ–¹æ³•çš„.å…·ä½“çš„ä¸è¯¦ç»†èµ˜è¿°.</p>
<h1 id="è¿”å›æŸä¸ªå…ƒç´ "><a href="#è¿”å›æŸä¸ªå…ƒç´ " class="headerlink" title="è¿”å›æŸä¸ªå…ƒç´ "></a>è¿”å›æŸä¸ªå…ƒç´ </h1><p>æˆ‘ä»¬éƒ½çŸ¥é“åˆ—è¡¨ç›¸å¯¹äºæ•°ç»„æœ€æ–¹ä¾¿çš„åœ°æ–¹åœ¨äºæ–°å¢å…ƒç´ ,å› ä¸ºæˆ‘ä»¬åªéœ€è¦å°†ç‚¹è¿æ¥åˆ°åé¢å°±å¯ä»¥äº†.è€Œä¸éœ€è¦è€ƒè™‘åœ¨æ–°å¢ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™å»æ£€æŸ¥æ•°ç»„é•¿åº¦.</p>
<p>ä½†æ˜¯ç›¸å¯¹äºè¿™ä¸€ç‚¹æ¥è¯´,é“¾è¡¨ä¹Ÿæœ‰ä¸æ–¹ä¾¿çš„ä¸€ç‚¹,å°±æ˜¯å»è·å–æŸä¸ªç‰¹å®šçš„å…ƒç´ :<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</div><div class="line">        Node&lt;E&gt; x = first;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</div><div class="line">            x = x.next;</div><div class="line">        <span class="keyword">return</span> x;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Node&lt;E&gt; x = last;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</div><div class="line">            x = x.prev;</div><div class="line">        <span class="keyword">return</span> x;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨ è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°äº†,å½“æˆ‘ä»¬éœ€è¦è·å–ç¬¬ n ä¸ªå…ƒç´ çš„æ—¶å€™,é“¾è¡¨éœ€è¦å…ˆæ£€æŸ¥æˆ‘ä»¬çš„ç¬¬ n ä¸ªå…ƒç´ æ˜¯ä¸¾ä¾‹å¤´å’Œå°¾å“ªä¸ªç‚¹æ›´è¿‘ä¸€äº›,ä¹‹åå†ä»å¤´æˆ–å°¾å¼€å§‹è®¡ç®—,ä¸€ä¸ªä¸€ä¸ªå»éå†,ç›´åˆ°åˆ°è¾¾æˆ‘ä»¬æ‰€éœ€è¦çš„ç‚¹ä¸ºæ­¢.<br>æ‰€ä»¥è¿™ä¸ªæ“ä½œè¦æ¶ˆè€—å¾ˆå¤šçš„è¡Œä¸º,æ‰€ä»¥å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™,è¿™ç§å¯»æ‰¾ä¸€ä¸ªç‚¹çš„æ–¹å¼å°±ä¼šå˜å¾—å¾ˆæ…¢.<br>å½“ç„¶,è¿™ç§æ…¢æ˜¯ä»…é™äºåœ¨å–å‡ºçš„ç‚¹è·ç¦»å¤´å°¾ç›¸å¯¹è¾ƒè¿œçš„æƒ…å†µ,å¦‚æœå–å‡ºçš„ç‚¹æ˜¯è·ç¦»å¤´å°¾å¾ˆè¿‘çš„æƒ…å†µä¸‹,è¿™ç§é€Ÿåº¦çš„å½±å“å…¶å®å¾®ä¹å…¶å¾®.</p>
<hr>
<h1 id="ArrayList-å’Œ-LinkedList-çš„å·®å¼‚"><a href="#ArrayList-å’Œ-LinkedList-çš„å·®å¼‚" class="headerlink" title="ArrayList å’Œ LinkedList çš„å·®å¼‚"></a><code>ArrayList</code> å’Œ <code>LinkedList</code> çš„å·®å¼‚</h1><p>æ‰€ä»¥æˆ‘ä»¬æ ¹æ®ä¸Šé¢å¯ä»¥å¾—åˆ°ç»“è®º:</p>
<blockquote>
<ul>
<li>å½“å¯¹äºæ•°æ®åˆ—è¡¨åªæ˜¯å•çº¯çš„å­˜å‚¨çš„æƒ…å†µä¸‹, <code>LinkedList</code> çš„æ•ˆç‡è¦æ›´é«˜ä¸€äº›,å› ä¸ºå®ƒé¿å…äº†åœ¨æ–°å¢ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ä¸ºäº†è€ƒè™‘æ‰©å®¹çš„æƒ…å†µæ‰€æ¶ˆè€—çš„æˆæœ¬.</li>
<li>å½“å¯¹äºæ•°æ®åˆ—è¡¨éœ€è¦é¢‘ç¹å–å€¼çš„æƒ…å†µä¸‹, <code>ArrayList</code> çš„æ•ˆç‡è¦æ›´é«˜ä¸€ç‚¹,å› ä¸ºæ•°ç»„åœ¨æŸ¥è¯¢æŸä¸ªå…ƒç´ çš„æƒ…å†µä¸‹æ˜¯å¯ä»¥ç›´æ¥å®šä½åˆ°å¯¹åº”çš„å…ƒç´ ä½ç½®.</li>
</ul>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹å‡º,åœ¨ä½¿ç”¨åˆ—è¡¨çš„æ—¶å€™,åˆ—è¡¨çš„é€‰æ‹©å…¶å®å¯¹äºæˆ‘ä»¬çš„è¿è¡Œæ•ˆç‡äº§ç”Ÿäº†ç›¸å½“çš„å½±å“.</p>
<hr>
<p>å…³äº <code>LinkedList</code> æˆ‘ä»¬å°±ç ”ç©¶åˆ°è¿™é‡Œ,ä¹‹åæˆ‘ä»¬æœ‰æœºä¼šä¼šç»§ç»­ç ”ç©¶å…¶å®ƒçš„é›†åˆç±».</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æˆ‘ä»¬è¯´ä¸€ä¸‹ &lt;code&gt;LinkedList&lt;/code&gt; ,åœ¨åˆ—è¡¨çš„ä½¿ç”¨ä¸­,æˆ‘ä»¬å¾ˆå¤šæ—¶å€™ä¼šçº ç»“äºåˆ—è¡¨çš„é€‰æ‹©,æ˜¯é€‰æ‹©æ•°ç»„å®ç°çš„ &lt;code&gt;ArrayList&lt;/code&gt; è¿˜æ˜¯é€‰æ‹©é“¾è¡¨å®ç°çš„ &lt;code&gt;LinkedList&lt;/code&gt;.&lt;/p&gt;
&lt;h1 id=&quot;å±æ€§&quot;&gt;&lt;a href=&quot;#å±æ€§&quot; class=&quot;headerlink&quot; title=&quot;å±æ€§&quot;&gt;&lt;/a&gt;å±æ€§&lt;/h1&gt;&lt;p&gt;åˆ—è¡¨çš„åŸºæœ¬å±æ€§æœ‰ä¸‰ä¸ª,å’Œ &lt;code&gt;ArrayList&lt;/code&gt; ç±»ä¼¼,ç¬¬ä¸€ä¸ªå±æ€§æ˜¯:&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="ArrayList" scheme="http://yoursite.com/tags/ArrayList/"/>
    
  </entry>
  
  <entry>
    <title>ArrayListè§£æ</title>
    <link href="http://yoursite.com/2017/05/06/ArrayList%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2017/05/06/ArrayListè§£æ/</id>
    <published>2017-05-06T03:00:42.000Z</published>
    <updated>2017-05-08T14:17:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©å›å¤´ç ”ç©¶ä¸€ä¸‹ java ä¸­çš„åˆ—è¡¨ <code>ArrayList</code> ,å®ƒè¡¨ç¤ºç”¨æ•°ç»„æ¥å­˜å‚¨ä¸€ç³»åˆ—çš„å¯¹è±¡,å¹¶ä¸”æ”¯æŒ <code>List</code> çš„ç‰¹æ€§.</p>
<p>æˆ‘ä»¬ä»Šå¤©ç ”ç©¶ä¸€ä¸‹å®ƒçš„åŸºç¡€<strong><em>å±æ€§</em></strong>, <strong><em>æ·»åŠ æ–¹æ³•</em></strong>, ä»¥åŠä¸ lambda ç›¸å…³çš„éƒ¨åˆ†.</p>
<h1 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h1><h2 id="é»˜è®¤å®¹é‡"><a href="#é»˜è®¤å®¹é‡" class="headerlink" title="é»˜è®¤å®¹é‡"></a>é»˜è®¤å®¹é‡</h2><p>è¡¨ç¤ºæ–°å»ºä¸€ä¸ª <code>ArrayList</code> çš„åˆå§‹åŒ–ç©ºé—´.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">10</span>;</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="ç©ºåˆ—è¡¨"><a href="#ç©ºåˆ—è¡¨" class="headerlink" title="ç©ºåˆ—è¡¨"></a>ç©ºåˆ—è¡¨</h2><p>æä¾›ä¸¤ä¸ªç©ºçš„æ•°ç»„åˆ—è¡¨,ä¾›ä»£ç ä¸­ä½¿ç”¨ä»¥ä¾¿äºç»™å‚æ•°èµ‹å€¼.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="å­˜å‚¨æ•°ç»„"><a href="#å­˜å‚¨æ•°ç»„" class="headerlink" title="å­˜å‚¨æ•°ç»„"></a>å­˜å‚¨æ•°ç»„</h2><p>åœ¨æ•°ç»„æ³›å‹ä¸­å­˜å‚¨çš„æ•°æ®,ç”¨æ•°ç»„æ¥å®ç°.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">transient</span> Object[] elementData; <span class="comment">// non-private to simplify nested class access</span></div></pre></td></tr></table></figure></p>
<h2 id="åˆ—è¡¨å¤§å°"><a href="#åˆ—è¡¨å¤§å°" class="headerlink" title="åˆ—è¡¨å¤§å°"></a>åˆ—è¡¨å¤§å°</h2><p><code>size</code> è¡¨ç¤ºåˆ—è¡¨æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°,é»˜è®¤æ˜¯0<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> size;</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="æ‰©å®¹"><a href="#æ‰©å®¹" class="headerlink" title="æ‰©å®¹"></a>æ‰©å®¹</h1><p>å…¶å®å¦‚æœæåˆ°äº† <code>ArrayList</code> æˆ‘ä»¬å¾ˆå¤šæ—¶å€™éƒ½ä¼šæœ€å…ˆæåˆ° <code>ArrayList</code> çš„æ‰©å®¹æ–¹æ³•,é‚£ä¹ˆæˆ‘ä»¬è¿™è¾¹å°±å…ˆç ”ç©¶ä¸€ä¸‹æœ‰å…³æ‰©å®¹æ–¹æ³•çš„ä¸€ä¸²æ–¹æ³•é“¾</p>
<p><code>ArrayList</code> æœ‰ä¸€ä¸ªåä¸º <code>grow</code> çš„åŒ¿åæ–¹æ³•,é¡¾åæ€ä¹‰,å°±æ˜¯æ‰©å®¹,è®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸€ä¸‹(<strong>æ ¸å¿ƒ</strong>):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">    <span class="comment">//æˆ‘ä»¬å–åˆ°äº†åŸæœ‰çš„å®¹é‡</span></div><div class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</div><div class="line">    <span class="comment">//æ–°çš„å®¹é‡æš‚æ—¶ç­‰äºåŸæœ‰çš„å®¹é‡çš„ å¤§çº¦ ä¸€ç‚¹äº” å€</span></div><div class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</div><div class="line"></div><div class="line">    <span class="comment">//å– æ–°å®¹é‡ å’Œ ä¼ å…¥çš„æœ€å°å®¹é‡ ä¸­çš„è¾ƒå°è€…(ä¸ºäº†æ›´å°çš„å†…å­˜å ç”¨)</span></div><div class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</div><div class="line">        newCapacity = minCapacity;</div><div class="line"></div><div class="line">    <span class="comment">//MAX_ARRAY_SIZEçš„å€¼æ˜¯æœ€å¤§çš„ Integer - 8 (2147483639)</span></div><div class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</div><div class="line">        <span class="comment">/*</span></div><div class="line">        ç»¼åˆèµ·æ¥æˆ‘ä»¬å¯ä»¥çŸ¥é“ minCapacity æ˜¯å¤§äº 2147483639 çš„</div><div class="line">        ä¸‹é¢æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª åˆé€‚ çš„è¾ƒå¤§æ•°</div><div class="line">        */</div><div class="line">        newCapacity = hugeCapacity(minCapacity);</div><div class="line"></div><div class="line">    <span class="comment">//æ–¹æ³•è·å–äº†ä¸€ä¸ªæ–°çš„æ•°ç»„,é•¿åº¦ä¸ºæ–°çš„é•¿åº¦,å‰é¢çš„å…ƒç´ ä¸å˜, å»¶é•¿çš„éƒ¨åˆ†ä½¿ç”¨é»˜è®¤å€¼</span></div><div class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™å…¶ä¸­æˆ‘ä»¬è°ƒç”¨äº† <code>hugeCapacity</code> æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hugeCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//è´Ÿæ•°æŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸</span></div><div class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</div><div class="line"></div><div class="line">    <span class="comment">//è¿”å› MAX_VALUE æˆ–è€… MAX_VALUE-8</span></div><div class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</div><div class="line">        Integer.MAX_VALUE :</div><div class="line">        MAX_ARRAY_SIZE;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬å¾—å‡ºäº†,åœ¨åˆ—è¡¨é•¿åº¦æ²¡æœ‰å˜çš„<strong>ç‰¹åˆ«å·¨å¤§</strong>çš„æƒ…å†µä¸‹,æ–°çš„æ•°ç»„é•¿åº¦<strong><em>ä¸€èˆ¬æƒ…å†µä¸‹ä¼šå˜æˆåŸæœ‰é•¿åº¦çš„1.5å€</em></strong></p>
<p>æ‰€ä»¥å½“æˆ‘ä»¬åœ¨è°ƒç”¨ <code>add</code> æ–¹æ³•çš„æ—¶å€™,ä¼šå‘ç”Ÿå¦‚ä¸‹äº‹æƒ…:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</div><div class="line">    <span class="comment">//è°ƒç”¨äº†å¢åŠ é•¿åº¦çš„æ–¹æ³•,å…·ä½“å¢åŠ åˆ°å¤šå°‘å…¶å®ä¸é‡è¦</span></div><div class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</div><div class="line">    <span class="comment">//ç»™ size çš„ä¸‹ä¸€ä¸ªæ ‡è®°ä½èµ‹å€¼</span></div><div class="line">    elementData[size++] = e;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">    <span class="comment">//ç©ºé›†åˆçš„æ—¶å€™çš„å¤„ç†,å…¶å®ä¸æ€ä¹ˆé‡è¦</span></div><div class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</div><div class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//æ ¸å¿ƒå°±æ˜¯æ¥ç€å¾€ä¸‹èµ°äº†</span></div><div class="line">    ensureExplicitCapacity(minCapacity);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</div><div class="line">    <span class="comment">//é•¿åº¦ä¸å¯¹çš„æ—¶å€™æœ‰ç”¨,ä½†æ˜¯åœ¨ add ç¯å¢ƒä¸‹åªæ˜¯ä¼ å€¼ç»™ grow</span></div><div class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</div><div class="line">        grow(minCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥æˆ‘ä»¬ä¼šå‘ç°å…¶å®æ ¸å¿ƒä»£ç è¿˜æ˜¯ <code>grow</code> æ–¹æ³•,å…¶å®ƒçš„éƒ½æ˜¯å¤„ç†ä¸€äº›ç‰¹æ®Šæƒ…å†µçš„.</p>
<h1 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h1><p>åœ¨ <code>ArrayList</code> ä¸­æœ‰å‡ ä¸ªç±»ä¼¼çš„æ–¹æ³•,ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªç‰¹æ€§,å°±æ˜¯èƒ½å¤Ÿä»åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªç‰¹å®šçš„å…ƒç´ å¹¶ä¸”æ‰§è¡ŒæŸäº›æ“ä½œ, ä¾‹å¦‚:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(Object o)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span></span>;</div></pre></td></tr></table></figure>
<p>è¿™äº›æ–¹æ³•éƒ½éå¸¸ç±»ä¼¼,æ‰€ä»¥æˆ‘ä»¬ç°åœ¨ç ”ç©¶ä¸€ä¸‹ <code>indexOf</code> æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</div><div class="line">            <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)</div><div class="line">                <span class="keyword">return</span> i;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</div><div class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</div><div class="line">                <span class="keyword">return</span> i;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å¾ˆæ˜¾ç„¶æˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°ç»“è®º:</p>
<ul>
<li>æˆ‘ä»¬åœ¨å¯»æ‰¾å¯¹è±¡çš„æ—¶å€™ä¼šç”¨ for å¾ªç¯éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </li>
<li>å¯»æ‰¾å¯¹è±¡çš„æ—¶å€™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>equals</code> æ–¹æ³•</li>
</ul>
<h1 id="å‡½æ•°æ–¹æ³•"><a href="#å‡½æ•°æ–¹æ³•" class="headerlink" title="å‡½æ•°æ–¹æ³•"></a>å‡½æ•°æ–¹æ³•</h1><p>åœ¨ <code>ArrayList</code> ä¸­æœ‰å‡ ä¸ªæ–¹æ³•,å®ƒä»¥å‡½æ•°æ¥å£ä½œä¸ºå‚æ•°, åˆ†åˆ«æ˜¯å¦‚ä¸‹æ–¹æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> E&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeIf</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> E&gt; filter)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">replaceAll</span><span class="params">(UnaryOperator&lt;E&gt; operator)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> E&gt; c)</span></span>;</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸‹æˆ‘ä»¬ä¼šå¯¹ä¸Šé¢å‡ ä¸ªæ–¹æ³•ä¸¾ä¾‹ä½¿ç”¨æˆ–è€…è¿›è¡Œä»£ç åˆ†æ:</p>
<h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h2><p><code>forEach</code> æ–¹æ³•è¦æ±‚ä¼ å…¥ä¸€ä¸ª consumer, ç„¶åä¾æ®æˆ‘ä»¬ä¼ å…¥çš„ lambda å»å¯¹åˆ—è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œä¸€æ¬¡æ¶ˆè´¹è¡Œä¸º.</p>
<h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> E&gt; action)</span> </span>&#123;</div><div class="line">    <span class="comment">//å‡½æ•°çš„éç©ºæ ¡éªŒ</span></div><div class="line">    Objects.requireNonNull(action);</div><div class="line">    <span class="comment">//è®°å½•å½“å‰æ“ä½œæ¬¡æ•°,è·å–å½“å‰çš„æ•°æ®å’Œå¤§å°</span></div><div class="line">    <span class="keyword">final</span> <span class="keyword">int</span> expectedModCount = modCount;</div><div class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">    <span class="keyword">final</span> E[] elementData = (E[]) <span class="keyword">this</span>.elementData;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">int</span> size = <span class="keyword">this</span>.size;</div><div class="line"></div><div class="line">    <span class="comment">//å¯¹æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¾ªç¯,å¹¶ä¸”æ‰§è¡Œå¯¹åº”çš„æ¶ˆè´¹å‡½æ•°</span></div><div class="line">    <span class="comment">//modCount æ˜¯ç”¨æ¥é˜²æ­¢å¤šçº¿ç¨‹çš„æ—¶å€™å‡ºç°é—®é¢˜çš„, è¿™ä¸ªæ˜¯ä¸€ä¸ªç¡®ä¿ç›¸å¯¹çº¿ç¨‹å®‰å…¨çš„æ–¹æ¡ˆ</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; modCount == expectedModCount &amp;&amp; i &lt; size; i++) &#123;</div><div class="line">        action.accept(elementData[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//ä¸€æ—¦åœ¨éå†ç»“æŸä¹‹åå‘ç°ä¸­é€”åˆ—è¡¨å‘ç”Ÿäº†å˜åŒ–,é‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸</span></div><div class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ —å­"><a href="#æ —å­" class="headerlink" title="æ —å­"></a>æ —å­</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base05</span><span class="params">()</span></span>&#123;</div><div class="line">    List&lt;Integer&gt; arrayList = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</div><div class="line">    arrayList.forEach(i -&gt; &#123;</div><div class="line">        System.out.println(i);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="removeIf"><a href="#removeIf" class="headerlink" title="removeIf"></a>removeIf</h2><p><code>removeIf</code> æ–¹æ³•è¦æ±‚ä¼ å…¥ä¸€ä¸ª predicate å¹¶ä¸”å°†è¿”å›å€¼ä¸º true çš„ç§»é™¤æ–¹æ³•.å’Œ stream çš„ filter æœ‰äº›ç±»ä¼¼.</p>
<h3 id="æ —å­-1"><a href="#æ —å­-1" class="headerlink" title="æ —å­"></a>æ —å­</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base06</span><span class="params">()</span></span>&#123;</div><div class="line">    List&lt;Integer&gt; arrayList = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</div><div class="line">    ArrayList&lt;Integer&gt; newList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(arrayList);</div><div class="line">    newList.removeIf(i -&gt; &#123;</div><div class="line">        <span class="keyword">return</span> i % <span class="number">2</span> == <span class="number">0</span>;</div><div class="line">    &#125;);</div><div class="line">    newList.forEach(i -&gt; &#123;</div><div class="line">        System.out.println(i);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="replaceAll"><a href="#replaceAll" class="headerlink" title="replaceAll"></a>replaceAll</h2><p><code>replaceAll</code> æ–¹æ³•æ¥å—ä¸€ä¸ª UnaryOperator å‡½æ•°,è¿”å›ç›¸åŒç±»å‹çš„æ•°æ®æ¥æ›¿æ¢åŸæœ‰æ•°æ®</p>
<h3 id="æºç -1"><a href="#æºç -1" class="headerlink" title="æºç "></a>æºç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">replaceAll</span><span class="params">(UnaryOperator&lt;E&gt; operator)</span> </span>&#123;</div><div class="line">    <span class="comment">//éç©ºæ ¡éªŒ</span></div><div class="line">    Objects.requireNonNull(operator);</div><div class="line">    <span class="comment">//è®°å½•å½“å‰æ“ä½œæ¬¡æ•°,è·å–å½“å‰çš„æ•°æ®å’Œå¤§å°</span></div><div class="line">    <span class="keyword">final</span> <span class="keyword">int</span> expectedModCount = modCount;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">int</span> size = <span class="keyword">this</span>.size;</div><div class="line"></div><div class="line">    <span class="comment">//å¯¹æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¾ªç¯,å¹¶ä¸”æ‰§è¡Œå¯¹åº”çš„å‡½æ•°</span></div><div class="line">    <span class="comment">//modCount æ˜¯ç”¨æ¥é˜²æ­¢å¤šçº¿ç¨‹çš„æ—¶å€™å‡ºç°é—®é¢˜çš„, è¿™ä¸ªæ˜¯ä¸€ä¸ªç¡®ä¿ç›¸å¯¹çº¿ç¨‹å®‰å…¨çš„æ–¹æ¡ˆ</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; modCount == expectedModCount &amp;&amp; i &lt; size; i++) &#123;</div><div class="line">        elementData[i] = operator.apply((E) elementData[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//ä¸€æ—¦åœ¨éå†ç»“æŸä¹‹åå‘ç°ä¸­é€”åˆ—è¡¨å‘ç”Ÿäº†å˜åŒ–,é‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸</span></div><div class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">    &#125;</div><div class="line">    modCount++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ —å­-2"><a href="#æ —å­-2" class="headerlink" title="æ —å­"></a>æ —å­</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base07</span><span class="params">()</span></span>&#123;</div><div class="line">    List&lt;Integer&gt; arrayList = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</div><div class="line">    ArrayList&lt;Integer&gt; newList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(arrayList);</div><div class="line">    newList.replaceAll(i -&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">10</span> - i;</div><div class="line">    &#125;);</div><div class="line">    newList.forEach(i -&gt; &#123;</div><div class="line">        System.out.println(i);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><p><code>sort</code> æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ª comparator æ¥å£å¯¹è±¡çš„å‡½æ•°,è¡¨ç¤ºç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªæ•°çš„å¤§å°çš„å‡½æ•°</p>
<h3 id="æºç -2"><a href="#æºç -2" class="headerlink" title="æºç "></a>æºç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> E&gt; c)</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> <span class="keyword">int</span> expectedModCount = modCount;</div><div class="line">    Arrays.sort((E[]) elementData, <span class="number">0</span>, size, c);</div><div class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">    &#125;</div><div class="line">    modCount++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ —å­-3"><a href="#æ —å­-3" class="headerlink" title="æ —å­"></a>æ —å­</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base08</span><span class="params">()</span></span>&#123;</div><div class="line">    List&lt;Integer&gt; arrayList = Arrays.asList(<span class="number">934</span>,<span class="number">2</span>,<span class="number">13</span>,<span class="number">43</span>,<span class="number">5</span>);</div><div class="line">    ArrayList&lt;Integer&gt; newList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(arrayList);</div><div class="line">    newList.sort((a,b) -&gt; &#123;</div><div class="line">        <span class="keyword">if</span>(a &gt; b)&#123; <span class="keyword">return</span> <span class="number">1</span>;&#125;</div><div class="line">        <span class="keyword">else</span> &#123;<span class="keyword">return</span> -<span class="number">1</span>;&#125;</div><div class="line">    &#125;);</div><div class="line">    newList.forEach(i -&gt; &#123;</div><div class="line">        System.out.println(i);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<hr>
<p>æœ‰å…³ <code>ArrayList</code> çš„å­¦ä¹ å°±åˆ°è¿™é‡Œ.<br>ä¹‹åæˆ‘ä»¬ä¼šç»§ç»­å­¦ä¹  <code>LinkedList</code> çš„ç›¸å…³å†…å®¹.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©å›å¤´ç ”ç©¶ä¸€ä¸‹ java ä¸­çš„åˆ—è¡¨ &lt;code&gt;ArrayList&lt;/code&gt; ,å®ƒè¡¨ç¤ºç”¨æ•°ç»„æ¥å­˜å‚¨ä¸€ç³»åˆ—çš„å¯¹è±¡,å¹¶ä¸”æ”¯æŒ &lt;code&gt;List&lt;/code&gt; çš„ç‰¹æ€§.&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»Šå¤©ç ”ç©¶ä¸€ä¸‹å®ƒçš„åŸºç¡€&lt;strong&gt;&lt;em&gt;å±æ€§&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;em&gt;æ·»åŠ æ–¹æ³•&lt;/em&gt;&lt;/strong&gt;, ä»¥åŠä¸ lambda ç›¸å…³çš„éƒ¨åˆ†.&lt;/p&gt;
&lt;h1 id=&quot;å±æ€§&quot;&gt;&lt;a href=&quot;#å±æ€§&quot; class=&quot;headerlink&quot; title=&quot;å±æ€§&quot;&gt;&lt;/a&gt;å±æ€§&lt;/h1&gt;&lt;h2 id=&quot;é»˜è®¤å®¹é‡&quot;&gt;&lt;a href=&quot;#é»˜è®¤å®¹é‡&quot; class=&quot;headerlink&quot; title=&quot;é»˜è®¤å®¹é‡&quot;&gt;&lt;/a&gt;é»˜è®¤å®¹é‡&lt;/h2&gt;&lt;p&gt;è¡¨ç¤ºæ–°å»ºä¸€ä¸ª &lt;code&gt;ArrayList&lt;/code&gt; çš„åˆå§‹åŒ–ç©ºé—´.&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; DEFAULT_CAPACITY = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="ArrayList" scheme="http://yoursite.com/tags/ArrayList/"/>
    
  </entry>
  
  <entry>
    <title>Java lambda ç®€è¿°</title>
    <link href="http://yoursite.com/2017/05/05/Java-lambda-%E7%AE%80%E8%BF%B0/"/>
    <id>http://yoursite.com/2017/05/05/Java-lambda-ç®€è¿°/</id>
    <published>2017-05-05T14:16:35.000Z</published>
    <updated>2017-05-05T15:26:47.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h2><p>Java 8 æä¾›äº† lambda è¡¨è¾¾å¼.ç”¨æ¥å®ç°å‡½æ•°å¼ç¼–ç¨‹.</p>
<p>å¯èƒ½ä¼šæœ‰ç±»ä¼¼çš„å½¢å¼:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è¿”å›ä¸€ä¸ªå¯¹è±¡</span></div><div class="line">() -&gt; &#123;<span class="keyword">return</span> <span class="keyword">new</span> Random().nextInt();&#125;</div><div class="line"><span class="comment">//æ¶ˆè´¹ä¸€ä¸ªå¯¹è±¡</span></div><div class="line">x -&gt; &#123; System.out.println(x);&#125;</div><div class="line"><span class="comment">//æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¦ä¸€ä¸ª</span></div><div class="line">x -&gt; &#123;<span class="keyword">return</span> x * <span class="number">100</span>;&#125;</div><div class="line"><span class="comment">//å¤„ç†ä¸¤ä¸ªå¯¹è±¡</span></div><div class="line">(x,y) -&gt; ( <span class="keyword">return</span> x*y;)</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>å¯ä»¥å¼•ç”¨å¤–éƒ¨å¯¹è±¡,ä½†æ˜¯å®ƒå¿…é¡»æ˜¯æ—¢æˆäº‹å®çš„ final å˜é‡.<br>è¡¨ç¤ºè¿™ä¸ªå˜é‡å¯ä»¥ä¸æ˜¯ final çš„ä½†æ˜¯åªèƒ½èµ‹ä¸€æ¬¡å€¼.</p>
<p>åœ¨ java ä¸­,å¯¹äºåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£.å«åš<strong>å‡½æ•°æ¥å£</strong>,å¯ä»¥æœ‰æ›´å¤šæ–¹æ³•,ä½†æ˜¯åªèƒ½æ˜¯é»˜è®¤æ–¹æ³•å’Œå…·ä½“æ–¹æ³•.</p>
<p>æ‰€ä»¥ java 8 ä¸­æä¾›äº†ä¸€ä¸ªæ ‡ç­¾<code>@FunctionalInterface</code>ç”¨äºä¿è¯æ¥å£æ˜¯å‡½æ•°æ¥å£</p>
<h2 id="java-8-ä¸­æä¾›äº†å‡ å¤§å‡½æ•°å¼æ¥å£"><a href="#java-8-ä¸­æä¾›äº†å‡ å¤§å‡½æ•°å¼æ¥å£" class="headerlink" title="java 8 ä¸­æä¾›äº†å‡ å¤§å‡½æ•°å¼æ¥å£:"></a>java 8 ä¸­æä¾›äº†å‡ å¤§å‡½æ•°å¼æ¥å£:</h2><h3 id="Predicate"><a href="#Predicate" class="headerlink" title="Predicate"></a>Predicate</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡åˆ°å¸ƒå°”å€¼ç±»å‹çš„è½¬å˜<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x -&gt; &#123;<span class="keyword">return</span> <span class="keyword">true</span>;&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Consumer</span>&lt;<span class="title">T</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°è¡¨ç¤ºå¯¹ä¸€ä¸ªå¯¹è±¡çš„ä½¿ç”¨,å¹¶ä¸”ä¸è¿”å›å€¼<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x -&gt; &#123;System.out.println(x);&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°è¡¨ç¤ºå¯¹ä¸€ä¸ªå¯¹è±¡è½¬å˜ä¸ºå¦ä¸€ä¸ªå¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x -&gt; &#123; <span class="keyword">return</span> (AnotherType)x;&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Supplier"><a href="#Supplier" class="headerlink" title="Supplier"></a>Supplier</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Supplier</span>&lt;<span class="title">T</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°ç”Ÿæˆä¸€ä¸ªç±»å‹çš„å¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">() -&gt; &#123;<span class="keyword">return</span> (T)<span class="keyword">new</span> Instance();&#125;</div></pre></td></tr></table></figure></p>
<h3 id="BiPredicate"><a href="#BiPredicate" class="headerlink" title="BiPredicate"></a>BiPredicate</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BiPredicate</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°è¡¨ç¤ºä¸¤ä¸ªå¯¹è±¡åˆ°å¸ƒå°”å€¼çš„è½¬å˜<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(x,y) -&gt; &#123;<span class="keyword">return</span> x &gt; y;&#125;</div></pre></td></tr></table></figure></p>
<h3 id="BiConsumer"><a href="#BiConsumer" class="headerlink" title="BiConsumer"></a>BiConsumer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BiConsumer</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°è¡¨ç¤ºæ¶ˆè´¹ä¸¤ä¸ªå¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(x,y) -&gt; &#123; System.out.println(x+y);&#125;</div></pre></td></tr></table></figure></p>
<h3 id="BiFunction"><a href="#BiFunction" class="headerlink" title="BiFunction"></a>BiFunction</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BiFunction</span>&lt;<span class="title">T</span>, <span class="title">U</span>, <span class="title">R</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ¶ˆè´¹ä¸¤ä¸ªå¯¹è±¡ T å’Œ U ç”Ÿæˆä¸€ä¸ªç±»å‹ä¸º R çš„å¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(T t, U u) -&gt; &#123;<span class="keyword">return</span> (R) r;&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>åœ¨å¾ˆå¤šçš„æ–¹æ³•ä¸­ä¼šè¦æ±‚å‚æ•°ä¸­è¿”å›å¦‚ä¸Šçš„ä¸€äº›æ¥å£å®ä¾‹,å½“æˆ‘ä»¬éœ€è¦ä¼ å…¥å¯¹åº”çš„æ¥å£å¯¹è±¡çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° lambda æ¥ä»£æ›¿å¯¹æ¥å£çš„å®ç°ç±».<br>é€šå¸¸ä»£ç ä¸­ä¼šé€šè¿‡æ¥å£ç±»å‹æ¥æç¤ºæˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„å‡½æ•°ç±»å‹.æˆ‘ä»¬å¯ä»¥æ ¹æ®å¦‚ä¸Šç»™å‡ºçš„ä¾‹å­æ¥å®ç°æ¥å£.<br>å®ä¾‹å¯å‚è€ƒä¹‹å‰çš„æ–‡ç« : <a href="/2017/05/04/CompletableFutureè§£æ/" title="CompletableFutureè§£æ">CompletableFutureè§£æ</a></p>
<hr>
<p>æœ¬ç¯‡åªæ˜¯ä¸€ä¸ªç®€å•çš„ä»‹ç»,å¦‚æœæœ‰æœºä¼šåé¢ä¼šç»§ç»­ä»‹ç»ç›¸å…³çš„å†…å®¹.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€è¿°&quot;&gt;&lt;a href=&quot;#ç®€è¿°&quot; class=&quot;headerlink&quot; title=&quot;ç®€è¿°&quot;&gt;&lt;/a&gt;ç®€è¿°&lt;/h2&gt;&lt;p&gt;Java 8 æä¾›äº† lambda è¡¨è¾¾å¼.ç”¨æ¥å®ç°å‡½æ•°å¼ç¼–ç¨‹.&lt;/p&gt;
&lt;p&gt;å¯èƒ½ä¼šæœ‰ç±»ä¼¼çš„å½¢å¼:&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è¿”å›ä¸€ä¸ªå¯¹è±¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;() -&amp;gt; &amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Random().nextInt();&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ¶ˆè´¹ä¸€ä¸ªå¯¹è±¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;x -&amp;gt; &amp;#123; System.out.println(x);&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¦ä¸€ä¸ª&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;x -&amp;gt; &amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x * &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å¤„ç†ä¸¤ä¸ªå¯¹è±¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;(x,y) -&amp;gt; ( &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x*y;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="lambda" scheme="http://yoursite.com/tags/lambda/"/>
    
  </entry>
  
  <entry>
    <title>CompletableFutureè§£æ</title>
    <link href="http://yoursite.com/2017/05/04/CompletableFuture%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2017/05/04/CompletableFutureè§£æ/</id>
    <published>2017-05-04T06:52:56.000Z</published>
    <updated>2017-05-05T13:11:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™å‡ å¤©ç¨å¾®èŠ±æ—¶é—´å­¦ä¹ äº†ä¸€ä¸‹ java 8 æä¾›çš„å¤„ç†å¼‚æ­¥è°ƒç”¨çš„ä¸€ä¸ª future ç±» <code>CompletableFuture</code>.</p>
<p>è¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹å‡½æ•°å¼çš„ future å¯¹è±¡.ç”¨æ¥è®©æˆ‘ä»¬æ›´åŠ ä¼˜é›…çš„ä½¿ç”¨å¼‚æ­¥è°ƒç”¨.</p>
<h1 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h1><p><code>CompletableFuture</code>æ˜¯<code>Future</code>æ¥å£çš„å®ç°ç±».å†…éƒ¨åªæœ‰ä¸¤ä¸ªå±æ€§:<code>result</code>å’Œ<code>stack</code>ä¸¤ä¸ªå€¼,åˆ†åˆ«è¡¨ç¤ºå¯¹è±¡æ‰€å­˜å‚¨çš„å†…å®¹ä»¥åŠå¯¹è±¡ç°åœ¨çš„å®ŒæˆçŠ¶å†µ.</p>
<p>ç”±äº<code>CompletableFuture</code>ä¹Ÿæ˜¯ future å¯¹è±¡çš„ä¸€éƒ¨åˆ†,æ‰€ä»¥å®ƒä¹Ÿæœ‰ future çš„ç›¸å…³ç‰¹æ€§.åšä¸»åœ¨è¿™é‡Œè®¤ä¸ºå®ƒæœ€ç»ˆè¦çš„å†…å®¹å°±æ˜¯ä»–çš„æ‰§è¡Œæ—¶é—´,å°±æ˜¯:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CompletableFuture åªåœ¨å¯¹è±¡åˆ›å»ºçš„æ—¶å€™æ‰å¼€å§‹å°è¯•æ‰§è¡Œ</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h2><p><code>CompletableFuture</code>æœ‰ä¸¤ç±»æœ€åŸºæœ¬çš„åˆ›å»ºå¯¹è±¡çš„é™æ€æ–¹æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">supplyAsync</span><span class="params">(Supplier&lt;U&gt; supplier)</span></span>;</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">supplyAsync</span><span class="params">(Supplier&lt;U&gt; supplier, Executor executor)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CompletableFuture&lt;Void&gt; <span class="title">runAsync</span><span class="params">(Runnable runnable)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CompletableFuture&lt;Void&gt; <span class="title">runAsync</span><span class="params">(Runnable runnable, Executor executor)</span></span>;</div></pre></td></tr></table></figure></p>
<blockquote>
<ul>
<li>supplyAsync è¡¨ç¤ºéœ€è¦ä¼ å…¥ä¸€ä¸ª <code>Supplier</code> ç±»å‹çš„ lambda è¡¨è¾¾å¼æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</li>
<li>runAsync æ–¹æ³•è¡¨ç¤ºéœ€è¦ä¼ å…¥ä¸€ä¸ª <code>Runnable</code> ç±»å‹çš„å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</li>
<li>supplyAsync è¿”å›çš„å¯¹è±¡å¸¦æœ‰ç”Ÿæˆå€¼,è€Œ runAsync æ–¹æ³•è¿”å›çš„å¯¹è±¡åªèƒ½ç”¨æ¥ç¡®è®¤è¯¥æ“ä½œæ˜¯å¦å·²ç»å®Œæˆè€Œä¸èƒ½è·å–åˆ°å†…å®¹.åœ¨è¿™ä¸€ç‚¹ä¸Šå’Œ<code>Runnable</code>çš„æƒ…å†µæœ‰äº›ç±»ä¼¼</li>
<li>ä¸¤ä¸ªæ–¹æ³•éƒ½æœ‰å¯¹åº”çš„é‡å†™æ–¹æ³•, éœ€è¦ä¼ å…¥çº¿ç¨‹æ± ,å¦‚æœä¸ä¼ å…¥çº¿ç¨‹æ± ,åˆ™ä¼šé»˜è®¤ä½¿ç”¨<code>ForkJoinPool</code>çº¿ç¨‹æ± </li>
</ul>
</blockquote>
<h2 id="è·å–å¯¹è±¡å†…å®¹"><a href="#è·å–å¯¹è±¡å†…å®¹" class="headerlink" title="è·å–å¯¹è±¡å†…å®¹"></a>è·å–å¯¹è±¡å†…å®¹</h2><p><code>CompletableFuture</code>æœ‰å‡ ä¸ªç›¸å…³æ–¹æ³•,åŒ…æ‹¬:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>;</div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(<span class="keyword">long</span> timeout, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException, TimeoutException</span>;</div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">join</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">getNow</span><span class="params">(T valueIfAbsent)</span></span>;</div></pre></td></tr></table></figure></p>
<blockquote>
<ul>
<li>get æ–¹æ³•ä¼šä½¿å½“å‰çº¿ç¨‹é˜»å¡,å¹¶ä¸”ç­‰å¾…ç›´åˆ° future å®Œæˆ,å¹¶ä¸”å°†è¿”å› future çš„å€¼</li>
<li>å¸¦å‚æ•°çš„ get æ–¹æ³•éœ€è¦ä¼ å…¥å¯¹åº”çš„æ—¶é—´é•¿åº¦,ä¸€æ—¦è¶…å‡ºè¿™ä¸ªæ—¶é—´,ä¼šæŠ›å‡º<code>TimeoutException</code><blockquote>
<p>å…¶ä¸­ <code>TimeUnit</code> æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ—¶é—´ç±»å‹çš„æšä¸¾,æœ€å°å•ä½:çº³ç§’,æœ€å¤§å•ä½:æ—¥<br>[NANOSECONDS(çº³ç§’), MICROSECONDS(å¾®ç§’), MILLISECONDS(æ¯«ç§’), SECONDS(ç§’), MINUTES(åˆ†), HOURS(æ—¶), DAYS(æ—¥)]</p>
</blockquote>
</li>
<li>join æ–¹æ³•ä¸ get å¹¶æ— å¤ªå¤§å·®åˆ«,ä½† join æ–¹æ³•ä¸èƒ½è¢«æ‰“æ–­.(æš‚æ—¶æ²¡ææ¸…æ¥š)</li>
<li>getNow æ–¹æ³•ä¸ä¼šé˜»å¡çº¿ç¨‹,è€Œæ˜¯ç«‹å³è¿”å›å€¼,å¦‚æœè¯¥ future å½“å‰æ²¡æœ‰å®Œæˆ,åˆ™ä¼šç«‹åˆ»è¿”å›è¯¥æ–¹æ³•çš„ä¼ å…¥å‚æ•°.</li>
<li>get å’Œ join æ–¹æ³•ä¼šåœ¨æ­£å¸¸çš„æƒ…å†µä¸‹è¿”å›å€¼,åœ¨é‡åˆ°å¼‚å¸¸çš„æƒ…å†µä¸‹å°†å¼‚å¸¸<strong><em>æŠ›å‡º</em></strong></li>
</ul>
</blockquote>
<h2 id="å®Œæˆå¯¹è±¡"><a href="#å®Œæˆå¯¹è±¡" class="headerlink" title="å®Œæˆå¯¹è±¡"></a>å®Œæˆå¯¹è±¡</h2><p><code>CompletableFuture</code>æœ‰ä¸¤ä¸ªå®Œæˆæ–¹æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">complete</span><span class="params">(T value)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">completeExceptionally</span><span class="params">(Throwable ex)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">cancel</span><span class="params">(<span class="keyword">boolean</span> mayInterruptIfRunning)</span></span>;</div></pre></td></tr></table></figure></p>
<blockquote>
<ul>
<li>complete æ–¹æ³•å°†futureçŠ¶æ€ç½®ä¸ºå·²å®Œæˆ,å¹¶ä¸”å°†å‚æ•°æ³¨å…¥,ä½†å¦‚æœè¿™ä¸ªfutureå·²ç»å®Œæˆäº†,åˆ™ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–</li>
<li>completeExceptionally æ–¹æ³•å°†futureçŠ¶æ€ç½®ä¸ºå·²å®Œæˆ,å¹¶ä¸”å°†å¼‚å¸¸å‚æ•°æ³¨å…¥,å¹¶ä¸”åœ¨getçš„æ—¶å€™å›è·å–è¿™ä¸ªå¼‚å¸¸,ä½†å¦‚æœè¿™ä¸ªfutureå·²ç»å®Œæˆäº†,åˆ™ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–</li>
<li>cancel æ–¹æ³•ä¼šå–æ¶ˆ future å¯¹è±¡,å¹¶ä¸”ç½®å…¥ä¸€ä¸ª CancellationException. å‚æ•°è¡¨ç¤ºæ˜¯å¦ä¼šæ‰“æ–­ future çš„æ‰§è¡Œ(ç›®å‰æ²¡æœ‰æµ‹è¯•è¿‡)</li>
</ul>
</blockquote>
<h2 id="æ£€éªŒæ–¹æ³•"><a href="#æ£€éªŒæ–¹æ³•" class="headerlink" title="æ£€éªŒæ–¹æ³•"></a>æ£€éªŒæ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDone</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCancelled</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCompletedExceptionally</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>isDone ç”¨æ¥è¿”å› future å¯¹è±¡æ˜¯å¦å·²ç»å®Œæˆ</li>
<li>isCancelled ç”¨æ¥è¿”å› future å¯¹è±¡æ˜¯å¦å·²ç»è¢«å–æ¶ˆ</li>
<li>isCompletedExceptionally ç”¨æ¥è¿”å› future æ˜¯å¦å‡ºç°äº†å¼‚å¸¸</li>
</ul>
</blockquote>
<h2 id="then-æ–¹æ³•"><a href="#then-æ–¹æ³•" class="headerlink" title="then æ–¹æ³•"></a>then æ–¹æ³•</h2><p><code>CompletableFuture</code>æœ‰ä¸€ç³»åˆ—å»¶ç»­æ–¹æ³•,å¤§éƒ¨åˆ†éƒ½ä»¥ then å¼€å¤´.</p>
<ul>
<li>éƒ½è¡¨ç¤ºåœ¨ future å¯¹è±¡<strong><em>å·²å®Œæˆ</em></strong>ä¹‹åè¿›è¡ŒæŸç§æ“ä½œ.</li>
<li>æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>CompletableFuture</code>å¯¹è±¡</li>
<li>æ–¹æ³•çš„<code>Executor</code>å‚æ•°è¡¨ç¤ºæ˜¯å¦éœ€è¦ä¼ å…¥ä¸€ä¸ªçº¿ç¨‹æ± æ¥å¼€å¯æ–°çº¿ç¨‹æ“ä½œ</li>
<li><code>CompletableFuture</code>å¯¹è±¡å¯ä»¥åµŒå¥—</li>
<li>lambdaä¸­å¯ä»¥æŠ›å‡º RuntimeException .ä¸å¯ä»¥æŠ›å‡º Exception.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è¯¥æ–¹æ³•çš„ä¼ å…¥ä¸€ä¸ª T -&gt; U çš„Function&lt;T,U&gt;, å¹¶ä¸”è¿”å› &lt;U&gt; çš„CompletableFuture</span></div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">thenApply</span><span class="params">(Function&lt;? <span class="keyword">super</span> T,? extends U&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">thenApplyAsync</span><span class="params">(Function&lt;? <span class="keyword">super</span> T,? extends U&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">thenApplyAsync</span><span class="params">(Function&lt;? <span class="keyword">super</span> T,? extends U&gt; fn, Executor executor)</span></span>;</div><div class="line"><span class="comment">//ä¼ å…¥ä¸€ä¸ª Consumer å‡½æ•°æ¥å®Œæˆ. è¿”å›å€¼æ²¡æœ‰å†…å®¹</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">thenAccept</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">thenAcceptAsync</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">thenAcceptAsync</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action,Executor executor)</span></span>;</div><div class="line"><span class="comment">//ä¸ thenAccept æ–¹æ³•ç›¸åŒ,ä½†æ˜¯ä¼ å…¥å‚æ•°ä¸º Runnable</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">thenRun</span><span class="params">(Runnable action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">thenRunAsync</span><span class="params">(Runnable action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">thenRunAsync</span><span class="params">(Runnable action,Executor executor)</span></span>;</div><div class="line"><span class="comment">//thenCombine é’ˆå¯¹ä¸¤ä¸ª future è¿›è¡Œæ“ä½œ.</span></div><div class="line"><span class="comment">//éœ€è¦ä¼ å…¥å¦ä¸€ä¸ª future ä»¥åŠ ä¸€ä¸ª BiFunction&lt;T,U,V&gt; ,è¿”å›ä¸€ä¸ªæ–°çš„ future.</span></div><div class="line"><span class="keyword">public</span> &lt;U,V&gt; <span class="function">CompletableFuture&lt;V&gt; <span class="title">thenCombine</span><span class="params">(CompletionStage&lt;? extends U&gt; other,BiFunction&lt;? <span class="keyword">super</span> T,? <span class="keyword">super</span> U,? extends V&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U,V&gt; <span class="function">CompletableFuture&lt;V&gt; <span class="title">thenCombineAsync</span><span class="params">(CompletionStage&lt;? extends U&gt; other,BiFunction&lt;? <span class="keyword">super</span> T,? <span class="keyword">super</span> U,? extends V&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U,V&gt; <span class="function">CompletableFuture&lt;V&gt; <span class="title">thenCombineAsync</span><span class="params">(CompletionStage&lt;? extends U&gt; other,BiFunction&lt;? <span class="keyword">super</span> T,? <span class="keyword">super</span> U,? extends V&gt; fn, Executor executor)</span></span>;</div><div class="line"><span class="comment">//thenAcceptBoth åŒæ—¶ç­‰å¾…ä¸¤ä¸ª future ,å¹¶ä¸”è¿”å›ä¸€ä¸ªç©ºçš„CompletableFuture,</span></div><div class="line"><span class="comment">//Bi lambda çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ¥å—çš„ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªæ¥å— this , ç¬¬äºŒä¸ªæ¥å—ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›</span></div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;Void&gt; <span class="title">thenAcceptBoth</span><span class="params">(CompletionStage&lt;? extends U&gt; other,BiConsumer&lt;? <span class="keyword">super</span> T, ? <span class="keyword">super</span> U&gt; action)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;Void&gt; <span class="title">thenAcceptBothAsync</span><span class="params">(CompletionStage&lt;? extends U&gt; other,BiConsumer&lt;? <span class="keyword">super</span> T, ? <span class="keyword">super</span> U&gt; action)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;Void&gt; <span class="title">thenAcceptBothAsync</span><span class="params">(CompletionStage&lt;? extends U&gt; other,BiConsumer&lt;? <span class="keyword">super</span> T, ? <span class="keyword">super</span> U&gt; action, Executor executor)</span></span>;</div><div class="line"><span class="comment">//å’ŒthenAcceptBothæ–¹æ³•ç›¸åŒ,ä½†æ˜¯ä¼ å…¥å‚æ•°ä¸º Runnable</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">runAfterBoth</span><span class="params">(CompletionStage&lt;?&gt; other,Runnable action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">runAfterBothAsync</span><span class="params">(CompletionStage&lt;?&gt; other,Runnable action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">runAfterBothAsync</span><span class="params">(CompletionStage&lt;?&gt; other,Runnable action,Executor executor)</span></span>;</div><div class="line"><span class="comment">//åŒæ—¶ç­‰å¾…ä¸¤ä¸ª future åŒæ—¶å®Œæˆ ,å¹¶ä¸”å¯¹ç¬¬äºŒä¸ªè¿”å›çš„ future è¿›è¡Œå¤„ç†.</span></div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">applyToEither</span><span class="params">(CompletionStage&lt;? extends T&gt; other, Function&lt;? <span class="keyword">super</span> T, U&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">applyToEitherAsync</span><span class="params">(CompletionStage&lt;? extends T&gt; other, Function&lt;? <span class="keyword">super</span> T, U&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">applyToEitherAsync</span><span class="params">(CompletionStage&lt;? extends T&gt; other, Function&lt;? <span class="keyword">super</span> T, U&gt; fn,Executor executor)</span></span>;</div><div class="line"><span class="comment">//åŒæ—¶ç­‰å¾…ä¸¤ä¸ª future ,å¹¶ä¸”å¯¹ç¬¬äºŒä¸ª future çš„è¿”å›å€¼è¿›è¡Œæ¶ˆè´¹.</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">acceptEither</span><span class="params">(CompletionStage&lt;? extends T&gt; other, Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">acceptEitherAsync</span><span class="params">(CompletionStage&lt;? extends T&gt; other, Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">acceptEitherAsync</span><span class="params">(CompletionStage&lt;? extends T&gt; other, Consumer&lt;? <span class="keyword">super</span> T&gt; action, Executor executor)</span></span>;</div><div class="line"><span class="comment">//å’Œ acceptEitherAsync ç›¸åŒ,å¹¶ä¸”ä¼ å…¥ Runnable</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">runAfterEither</span><span class="params">(CompletionStage&lt;?&gt; other,Runnable action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">runAfterEitherAsync</span><span class="params">(CompletionStage&lt;?&gt; other, Runnable action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title">runAfterEitherAsync</span><span class="params">(CompletionStage&lt;?&gt; other,Runnable action,Executor executor)</span></span>;</div><div class="line"><span class="comment">//thenCompose æ¥å—ä¸€ä¸ª Function å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ CompletableFuture å¯¹è±¡.</span></div><div class="line"><span class="comment">//æ‰€æ”¶é›†åˆ°çš„å¯¹è±¡æ˜¯æ²¡æœ‰åµŒå¥—çš„ CompletableFuture å¯¹è±¡. ç±»ä¼¼ flatMap çš„æ•ˆæœ</span></div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">thenCompose</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends CompletionStage&lt;U&gt;&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">thenComposeAsync</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends CompletionStage&lt;U&gt;&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">thenComposeAsync</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends CompletionStage&lt;U&gt;&gt; fn,Executor executor)</span></span>;</div><div class="line"><span class="comment">//whenComplete æ¥å— future ä¸­æŠ›å‡ºçš„å¼‚å¸¸å’Œè¿”å›</span></div><div class="line"><span class="comment">//åœ¨è¿”å›æˆ–è€…å¼‚å¸¸ä¹‹åå¯¹è¿”å›å€¼è¿›è¡Œæ¶ˆè´¹,æˆ–è€…è¿”å›æ­£å¸¸ç»“æœ</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;T&gt; <span class="title">whenComplete</span><span class="params">(BiConsumer&lt;? <span class="keyword">super</span> T, ? <span class="keyword">super</span> Throwable&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;T&gt; <span class="title">whenCompleteAsync</span><span class="params">(BiConsumer&lt;? <span class="keyword">super</span> T, ? <span class="keyword">super</span> Throwable&gt; action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;T&gt; <span class="title">whenCompleteAsync</span><span class="params">(BiConsumer&lt;? <span class="keyword">super</span> T, ? <span class="keyword">super</span> Throwable&gt; action, Executor executor)</span></span>;</div><div class="line"><span class="comment">//handleAsync æ¥å—ä¸€ä¸ª function&lt;è¿”å›å€¼,å¼‚å¸¸,ç»“æœ&gt; å¹¶åœ¨è¿”å›ä¹‹åå¯¹ future çš„ç›¸åº”è¿›è¡Œå¤„ç†</span></div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">handle</span><span class="params">(BiFunction&lt;? <span class="keyword">super</span> T, Throwable, ? extends U&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">handleAsync</span><span class="params">(BiFunction&lt;? <span class="keyword">super</span> T, Throwable, ? extends U&gt; fn)</span></span>;</div><div class="line"><span class="keyword">public</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">handleAsync</span><span class="params">(BiFunction&lt;? <span class="keyword">super</span> T, Throwable, ? extends U&gt; fn, Executor executor)</span></span>;</div><div class="line"><span class="comment">//exceptionally ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ CompletableFuture, å¹¶ä¸”è¯¥æ–¹æ³•ä¼šé˜»å¡å½“å‰çº¿ç¨‹</span></div><div class="line"><span class="comment">//å½“åŸæœ‰æ–¹æ³•å‘ç”Ÿäº†å¼‚å¸¸,exceptionally çš„ function ä¼šæ‰§è¡Œ.</span></div><div class="line"><span class="comment">//å½“åŸæœ‰æ–¹æ³•æ­£å¸¸å®Œæˆ,åˆ™ä¼šè¿”å›ä¸€ä¸ªç›¸åŒçš„ç»“æœ</span></div><div class="line"><span class="function"><span class="keyword">public</span> CompletableFuture&lt;T&gt; <span class="title">exceptionally</span><span class="params">(Function&lt;Throwable, ? extends T&gt; fn)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="å¤„ç†å¤šä¸ªCompletableFuture"><a href="#å¤„ç†å¤šä¸ªCompletableFuture" class="headerlink" title="å¤„ç†å¤šä¸ªCompletableFuture"></a>å¤„ç†å¤šä¸ª<code>CompletableFuture</code></h2><p>å¯¹äºå¤šä¸ªç›¸äº’ç‹¬ç«‹çš„<code>CompletableFuture</code>,æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥å¤„ç†å®ƒä»¬</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CompletableFuture&lt;Void&gt; <span class="title">allOf</span><span class="params">(CompletableFuture&lt;?&gt;... cfs)</span></span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CompletableFuture&lt;Object&gt; <span class="title">anyOf</span><span class="params">(CompletableFuture&lt;?&gt;... cfs)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="allOfæ–¹æ³•"><a href="#allOfæ–¹æ³•" class="headerlink" title="allOfæ–¹æ³•"></a>allOfæ–¹æ³•</h3><blockquote>
<ul>
<li>CompletableFuture.allOf é™æ€æ–¹æ³•,ä¼ å…¥å¤šä¸ªç‹¬ç«‹çš„ future ,å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„CompletableFuture.</li>
<li>å½“æ‰€æœ‰çš„ future å®Œæˆæ—¶,æ–°çš„ future åŒæ—¶å®Œæˆ</li>
<li>ä¸èƒ½ä¼ å…¥ç©ºå€¼</li>
<li>å½“æŸä¸ªæ–¹æ³•å‡ºç°äº†å¼‚å¸¸æ—¶,æ–° future ä¼šåœ¨æ‰€æœ‰ future å®Œæˆçš„æ—¶å€™å®Œæˆ,å¹¶ä¸”åŒ…å«ä¸€ä¸ªå¼‚å¸¸.</li>
</ul>
</blockquote>
<h3 id="anyOfæ–¹æ³•"><a href="#anyOfæ–¹æ³•" class="headerlink" title="anyOfæ–¹æ³•"></a>anyOfæ–¹æ³•</h3><blockquote>
<ul>
<li>CompletableFuture.anyOf é™æ€æ–¹æ³•,ä¼ å…¥å¤šä¸ªç‹¬ç«‹çš„ future ,å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„CompletableFuture</li>
<li>å½“ä»»ä½•ä¸€ä¸ªæ–¹æ³•å®Œæˆæ—¶,æ–°çš„ future å®Œæˆ,å¹¶ä¸”è¿”å›è¯¥å€¼</li>
<li>ä¸èƒ½ä¼ å…¥ç©ºå€¼</li>
<li>å½“æŸä¸ªæ–¹æ³•å‡ºç°äº†å¼‚å¸¸æ—¶,æ–° future ä¼šç«‹åˆ»å®Œæˆ,å¹¶ä¸”æºå¸¦ä¸€ä¸ªå¼‚å¸¸</li>
</ul>
</blockquote>
<h2 id="completedFuture-æ–¹æ³•"><a href="#completedFuture-æ–¹æ³•" class="headerlink" title="completedFuture æ–¹æ³•"></a>completedFuture æ–¹æ³•</h2><ul>
<li>completedFuture æ–¹æ³•æ˜¯èƒ½å¤Ÿç›´æ¥å°†å€¼æ”¾å…¥ future å¯¹è±¡,å¸¸ç”¨äºæµ‹è¯•</li>
<li>CompletableFutureå¯ä»¥åµŒå¥—<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;U&gt; <span class="function">CompletableFuture&lt;U&gt; <span class="title">completedFuture</span><span class="params">(U value)</span></span>;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="æ —å­"><a href="#æ —å­" class="headerlink" title="æ —å­"></a>æ —å­</h1><h2 id="åˆ›å»ºå¯¹è±¡-1"><a href="#åˆ›å»ºå¯¹è±¡-1" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base01</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * CompletableFutureçš„é™æ€æ–¹æ³•supplyAsync(Supplier&lt;U&gt; supplier)è¿”å›ä¸€ä¸ªå¸¦æœ‰</div><div class="line">     * ForkJoinPool çº¿ç¨‹æ± çš„ CompletableFuture å¯¹è±¡.</div><div class="line">     * CompletableFuture å¯¹è±¡å¯ä»¥è°ƒç”¨getæ–¹æ³•,è¿™æ ·ä¼šä½¿çº¿ç¨‹é˜»å¡.</div><div class="line">     * Supplier&lt;T&gt; æ¥å£æ˜¯ä¸€ä¸ª () -&gt; T çš„å‡½æ•°</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    System.out.println(future.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base02</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * CompletableFutureçš„é™æ€æ–¹æ³•supplyAsync(Supplier&lt;U&gt; supplier, Executor executor)</div><div class="line">     * è¿”å›ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰çš„çº¿ç¨‹æ± çš„CompletableFutureå¯¹è±¡.</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt(), Executors.newCachedThreadPool());</div><div class="line">    System.out.println(future.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base03</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * CompletableFutureçš„é™æ€æ–¹æ³• runAsync(Runnable runnable)è¿”å›ä¸€ä¸ªå¸¦æœ‰</div><div class="line">     * ForkJoinPoolçº¿ç¨‹æ± çš„CompletableFutureå¯¹è±¡.ä½†æ˜¯è¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¿”å›å€¼</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.runAsync(getRandomIntRunnable());</div><div class="line">    Assert.assertEquals(<span class="keyword">null</span>,future.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base04</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * CompletableFutureçš„é™æ€æ–¹æ³• runAsync(Runnable runnable, Executor executor)</div><div class="line">     * è¿”å›ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰çš„çº¿ç¨‹æ± çš„CompletableFutureå¯¹è±¡.ä½†æ˜¯è¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¿”å›å€¼</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.runAsync(getRandomIntRunnable(), Executors.newCachedThreadPool());</div><div class="line">    Assert.assertEquals(<span class="keyword">null</span>,future.get());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="è·å–å¯¹è±¡å†…å®¹-1"><a href="#è·å–å¯¹è±¡å†…å®¹-1" class="headerlink" title="è·å–å¯¹è±¡å†…å®¹"></a>è·å–å¯¹è±¡å†…å®¹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base06</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException, TimeoutException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * get(long,TimeUnit) æ–¹æ³•é˜»å¡å¹¶ä¸”ç­‰å¾…è¿”å›ç»“æœ,TimeUnitè¡¨ç¤ºæ—¶é—´é•¿åº¦å•ä½,æœ€å°æ˜¯çº³ç§’.</div><div class="line">     * å½“è¶…æ—¶æœªè¿”å›ä¿¡æ¯çš„æ—¶å€™å›æŠ›å‡ºTimeoutExceptionå¼‚å¸¸</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    System.out.println(future.get(<span class="number">10</span>, TimeUnit.MILLISECONDS));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base07</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * join æ–¹æ³•ä¸ get æ–¹æ³•æ— åŸºæœ¬å·®åˆ«</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    System.out.println(future.join());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base08</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * getNow(obj) æ–¹æ³•ç«‹å³è¿”å›ç»“æœ,å¦‚æœæ— ç»“æœå°±è¿”å›ä¼ å…¥å‚æ•°</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    System.out.println(future.getNow(<span class="string">"1bca"</span>));</div><div class="line">    System.out.println(future.get());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å®Œæˆå¯¹è±¡-1"><a href="#å®Œæˆå¯¹è±¡-1" class="headerlink" title="å®Œæˆå¯¹è±¡"></a>å®Œæˆå¯¹è±¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base09</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * complete æ–¹æ³•å°†futureçŠ¶æ€ç½®ä¸ºå·²å®Œæˆ,å¹¶ä¸”å°†å‚æ•°æ³¨å…¥,ä½†å¦‚æœè¿™ä¸ªfutureå·²ç»å®Œæˆäº†,åˆ™</div><div class="line">     * ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    future.complete(<span class="string">"123"</span>);</div><div class="line">    System.out.println(future.get());</div><div class="line">    future.complete(<span class="string">"345"</span>);</div><div class="line">    System.out.println(future.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base10</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * completeExceptionally æ–¹æ³•å°†futureçŠ¶æ€ç½®ä¸ºå·²å®Œæˆ,å¹¶ä¸”å°†å¼‚å¸¸å‚æ•°æ³¨å…¥,</div><div class="line">     * å¹¶ä¸”åœ¨getçš„æ—¶å€™å›è·å–è¿™ä¸ªå¼‚å¸¸</div><div class="line">     * ä½†å¦‚æœè¿™ä¸ªfutureå·²ç»å®Œæˆäº†,åˆ™ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    future.complete(<span class="string">"123"</span>);</div><div class="line">    System.out.println(future.get());</div><div class="line">    future.complete(<span class="string">"345"</span>);</div><div class="line">    System.out.println(future.get());</div><div class="line">    future.completeExceptionally(<span class="keyword">new</span> Exception(<span class="string">"abc"</span>));</div><div class="line">    System.out.println(future.get());</div><div class="line">    future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    future.completeExceptionally(<span class="keyword">new</span> Exception(<span class="string">"abc"</span>));</div><div class="line">    System.out.println(future.get());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ£€éªŒæ–¹æ³•-1"><a href="#æ£€éªŒæ–¹æ³•-1" class="headerlink" title="æ£€éªŒæ–¹æ³•"></a>æ£€éªŒæ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base20</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * cancel æ–¹æ³•ä¼šå–æ¶ˆ future å¯¹è±¡,å¹¶ä¸”ç½®å…¥ä¸€ä¸ª CancellationException</div><div class="line">         */</div><div class="line">        CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">        System.out.println(<span class="string">"done?"</span>+future.isDone()+<span class="string">" cancel?"</span>+future.isCancelled()+<span class="string">" exp?"</span>+future.isCompletedExceptionally());</div><div class="line"><span class="comment">//        future.get();</span></div><div class="line">        future.cancel(<span class="keyword">false</span>);</div><div class="line">        System.out.println(<span class="string">"done?"</span>+future.isDone()+<span class="string">" cancel?"</span>+future.isCancelled()+<span class="string">" exp?"</span>+future.isCompletedExceptionally());</div><div class="line">        future.get();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="then-æ–¹æ³•-1"><a href="#then-æ–¹æ³•-1" class="headerlink" title="then æ–¹æ³•"></a>then æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base11</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * thenApplyAsync æ–¹æ³•ä¼šåœ¨å‰ä¸€ä¸ªfuture *å·²å®Œæˆ* çš„æƒ…å†µä¸‹å¼€å§‹æ‰§è¡Œæ–¹æ³•ä¸­çš„lambdaå‡½æ•°.</div><div class="line">     * å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„futureå¯¹è±¡.</div><div class="line">     * è¯¥æ–¹æ³•çš„ä¼ å…¥ä¸€ä¸ª T -&gt; U çš„Function&lt;T,U&gt;, å¹¶ä¸”è¿”å› &lt;U&gt; çš„CompletableFuture</div><div class="line">     * æ–¹æ³•çš„å‚æ•°è¡¨ç¤ºæ˜¯å¦éœ€è¦ä¼ å…¥ä¸€ä¸ªçº¿ç¨‹æ± æ¥å¼€å¯æ–°çº¿ç¨‹æ“ä½œ</div><div class="line">     */</div><div class="line">    CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    System.out.println(<span class="keyword">new</span> Date().getTime());</div><div class="line">    CompletableFuture&lt;Integer&gt; newFuture = future.thenApplyAsync(x -&gt; &#123;</div><div class="line">        System.out.println(<span class="keyword">new</span> Date().getTime());</div><div class="line">        <span class="keyword">return</span> x * <span class="number">100</span>;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//è·å–ä¸¤ä¸ªfutureçš„ç»“æœ</span></div><div class="line">    System.out.println(future.get());</div><div class="line">    System.out.println(newFuture.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base12</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * thenAcceptAsync ä¼ å…¥ä¸€ä¸ª Consumer å‡½æ•°æ¥å®Œæˆ.</div><div class="line">     * å…¶å®ƒä¸ thenApplyAsync ç›¸åŒ</div><div class="line">     * thenRunAsync æ–¹æ³•ä¸æ­¤æ–¹æ³•ç›¸åŒ,ä½†æ˜¯ä¼ å…¥æ˜¯ä¸€ä¸ª Runnable</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture future1 = future.thenAcceptAsync(num -&gt; &#123;</div><div class="line">        System.out.println(num);</div><div class="line">    &#125;);</div><div class="line">    future.get();</div><div class="line">    System.out.println(future1.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base13</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * thenCombine é’ˆå¯¹ä¸¤ä¸ª future è¿›è¡Œæ“ä½œ.</div><div class="line">     * éœ€è¦ä¼ å…¥å¦ä¸€ä¸ª future ä»¥åŠ ä¸€ä¸ª BiFunction&lt;T,U,V&gt; ,è¿”å›ä¸€ä¸ªæ–°çš„ future.</div><div class="line">     */</div><div class="line">    CompletableFuture&lt;Integer&gt; a = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture&lt;Integer&gt; b = CompletableFuture.supplyAsync(getRandomInt(<span class="number">3000l</span>));</div><div class="line">    CompletableFuture c = a.thenCombine(b,(a1,b1) -&gt; &#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            Thread.sleep(<span class="number">200</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span>  a1+b1;</div><div class="line">    &#125;);</div><div class="line">    System.out.println(<span class="string">"a:"</span>+a.get());</div><div class="line">    System.out.println(<span class="string">"b:"</span>+b.get());</div><div class="line">    System.out.println(<span class="string">"c:"</span>+c.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base14</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * thenAcceptBoth åŒæ—¶ç­‰å¾…ä¸¤ä¸ª future ,å¹¶ä¸”è¿”å›ä¸€ä¸ªç©ºçš„CompletableFuture,</div><div class="line">     * Bi lambda çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ¥å—çš„ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªæ¥å— this , ç¬¬äºŒä¸ªæ¥å—ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›</div><div class="line">     * runAfterBothAsync æ–¹æ³•å’Œæ­¤æ–¹æ³•ç›¸åŒ,ä½†æ˜¯ä¼ å…¥å‚æ•°ä¸º Runnable</div><div class="line">     */</div><div class="line">    CompletableFuture&lt;Integer&gt; a = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture&lt;Integer&gt; b = CompletableFuture.supplyAsync(getRandomInt(<span class="number">3000l</span>));</div><div class="line">    a.thenAcceptBoth(b,(a1,b1) -&gt; &#123;</div><div class="line">        System.out.println(a1);</div><div class="line">        System.out.println(b1);</div><div class="line">    &#125;);</div><div class="line">    a.get();</div><div class="line">    b.get();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base15</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * applyToEitherAsync åŒæ—¶ç­‰å¾…ä¸¤ä¸ª future åŒæ—¶å®Œæˆ ,å¹¶ä¸”å¯¹ç¬¬äºŒä¸ªè¿”å›çš„ future è¿›è¡Œå¤„ç†.</div><div class="line">     * acceptEitherAsync åŒæ—¶ç­‰å¾…ä¸¤ä¸ª future ,å¹¶ä¸”å¯¹ç¬¬äºŒä¸ª future çš„è¿”å›å€¼è¿›è¡Œæ¶ˆè´¹.</div><div class="line">     * runAfterEitherAsync å’Œ acceptEitherAsync ç›¸åŒ,å¹¶ä¸”ä¼ å…¥ Runnable</div><div class="line">     */</div><div class="line">    CompletableFuture&lt;Integer&gt; a = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture&lt;Integer&gt; b = CompletableFuture.supplyAsync(getRandomInt(<span class="number">3000l</span>));</div><div class="line">    CompletableFuture c = a.applyToEitherAsync(b,b1 -&gt; &#123;</div><div class="line">        <span class="keyword">return</span> b1*<span class="number">100</span>;</div><div class="line">    &#125;);</div><div class="line">    a.get();</div><div class="line">    b.get();</div><div class="line">    System.out.println(c.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base16</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * whenComplete æ¥å— future ä¸­æŠ›å‡ºçš„å¼‚å¸¸å’Œè¿”å›, æ–¹æ³•ä¸­å¯ä»¥æŠ›å‡º RuntimeException .ä¸å¯ä»¥æŠ›å‡º Exception.</div><div class="line">     * åœ¨è¿”å›æˆ–è€…å¼‚å¸¸ä¹‹åå¯¹è¿”å›å€¼è¿›è¡Œæ¶ˆè´¹,æˆ–è€…è¿”å›æ­£å¸¸ç»“æœ</div><div class="line">     * handleAsync æ¥å—ä¸€ä¸ª function&lt;è¿”å›å€¼,å¼‚å¸¸,ç»“æœ&gt; å¹¶åœ¨è¿”å›ä¹‹åå¯¹ future çš„ç›¸åº”è¿›è¡Œå¤„ç†</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(() -&gt; &#123;</div><div class="line">        <span class="keyword">int</span> a = <span class="keyword">new</span> Random().nextInt(<span class="number">10</span>);</div><div class="line">        <span class="keyword">if</span>(a &gt; <span class="number">5</span>)&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"too big"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> a;</div><div class="line">    &#125;);</div><div class="line">    future.whenComplete((res,ex) -&gt; &#123;</div><div class="line">        System.out.println(<span class="string">"result:"</span>+res+<span class="string">", ex:"</span>+ex);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base17</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * exceptionally ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ CompletableFuture , è¯¥æ–¹æ³•ä¼šé˜»å¡,</div><div class="line">     * å½“åŸæœ‰æ–¹æ³•å‘ç”Ÿäº†å¼‚å¸¸,exceptionally çš„ function ä¼šæ‰§è¡Œ.</div><div class="line">     * å½“åŸæœ‰æ–¹æ³•æ­£å¸¸å®Œæˆ,åˆ™ä¼šè¿”å›ä¸€ä¸ªç›¸åŒçš„ç»“æœ</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(() -&gt; &#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            Thread.sleep(<span class="number">1000</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"except"</span>);</div><div class="line">    &#125;);</div><div class="line">    CompletableFuture exfuture = future.exceptionally(ex -&gt; &#123;<span class="keyword">return</span> <span class="keyword">new</span> Exception(((RuntimeException) ex).getMessage());&#125;);</div><div class="line">    System.out.println(exfuture.get());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base21</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * thenCompose æ¥å—ä¸€ä¸ª Function å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ CompletableFuture å¯¹è±¡.</div><div class="line">     * æ‰€æ”¶é›†åˆ°çš„å¯¹è±¡æ˜¯æ²¡æœ‰åµŒå¥—çš„ CompletableFuture å¯¹è±¡. ç±»ä¼¼ flatMap çš„æ•ˆæœ</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture newFuture = future.thenCompose(num -&gt; &#123;</div><div class="line">        <span class="keyword">return</span> CompletableFuture.completedFuture(num);</div><div class="line">    &#125;);</div><div class="line">    System.out.println(newFuture.get());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å¤„ç†å¤šä¸ªCompletableFuture-1"><a href="#å¤„ç†å¤šä¸ªCompletableFuture-1" class="headerlink" title="å¤„ç†å¤šä¸ªCompletableFuture"></a>å¤„ç†å¤šä¸ª<code>CompletableFuture</code></h2><h3 id="allOfæ–¹æ³•-1"><a href="#allOfæ–¹æ³•-1" class="headerlink" title="allOfæ–¹æ³•"></a>allOfæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base18</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * CompletableFuture.allOf é™æ€æ–¹æ³•,ä¼ å…¥å¤šä¸ªç‹¬ç«‹çš„ future ,å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„CompletableFuture</div><div class="line">     * å½“æ‰€æœ‰çš„ future å®Œæˆæ—¶,æ–°çš„ future åŒæ—¶å®Œæˆ,</div><div class="line">     * ä¸èƒ½ä¼ å…¥ç©ºå€¼</div><div class="line">     * å½“æŸä¸ªæ–¹æ³•å‡ºç°äº†å¼‚å¸¸æ—¶,æ–° future ä¼šåœ¨æ‰€æœ‰ future å®Œæˆçš„æ—¶å€™å®Œæˆ,å¹¶ä¸”åŒ…å«ä¸€ä¸ªå¼‚å¸¸.</div><div class="line">     */</div><div class="line">    CompletableFuture&lt;Integer&gt; a = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture&lt;Integer&gt; b = CompletableFuture.supplyAsync(getRandomInt(<span class="number">3000l</span>));</div><div class="line">    CompletableFuture ex = CompletableFuture.supplyAsync(() -&gt; &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"runtime"</span>);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"is a done?"</span> +a.isDone()+<span class="string">". Is b done?"</span>+b.isDone()+<span class="string">"."</span>);</div><div class="line">    CompletableFuture future = CompletableFuture.allOf(a,b,ex);</div><div class="line">    System.out.println(<span class="string">"is a done?"</span> +a.isDone()+<span class="string">". Is b done?"</span>+b.isDone()+<span class="string">"."</span>);</div><div class="line">    CompletableFuture exFuture = future.exceptionally( exp -&gt; &#123;</div><div class="line">        <span class="keyword">return</span> ((RuntimeException) exp).getMessage();</div><div class="line">    &#125;);</div><div class="line">    System.out.println(<span class="string">"done?"</span>+future.isDone()+<span class="string">" cancel?"</span>+future.isCancelled()+<span class="string">" exp?"</span>+future.isCompletedExceptionally());</div><div class="line">    System.out.println(<span class="string">"is a done?"</span> +a.isDone()+<span class="string">". Is b done?"</span>+b.isDone()+<span class="string">"."</span>);</div><div class="line">    System.out.println(exFuture.get());</div><div class="line">    System.out.println(<span class="string">"done?"</span>+future.isDone()+<span class="string">" cancel?"</span>+future.isCancelled()+<span class="string">" exp?"</span>+future.isCompletedExceptionally());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="anyOfæ–¹æ³•-1"><a href="#anyOfæ–¹æ³•-1" class="headerlink" title="anyOfæ–¹æ³•"></a>anyOfæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base19</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * CompletableFuture.anyOf é™æ€æ–¹æ³•,ä¼ å…¥å¤šä¸ªç‹¬ç«‹çš„ future ,å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„CompletableFuture</div><div class="line">     * å½“ä»»ä½•ä¸€ä¸ªæ–¹æ³•å®Œæˆæ—¶,æ–°çš„ future å®Œæˆ,å¹¶ä¸”è¿”å›è¯¥å€¼</div><div class="line">     * ä¸èƒ½ä¼ å…¥ç©ºå€¼</div><div class="line">     * å½“æŸä¸ªæ–¹æ³•å‡ºç°äº†å¼‚å¸¸æ—¶,æ–° future ä¼šç«‹åˆ»å®Œæˆ,å¹¶ä¸”æºå¸¦ä¸€ä¸ªå¼‚å¸¸</div><div class="line">     */</div><div class="line">    CompletableFuture&lt;Integer&gt; a = CompletableFuture.supplyAsync(getRandomInt());</div><div class="line">    CompletableFuture&lt;Integer&gt; b = CompletableFuture.supplyAsync(getRandomInt(<span class="number">3000l</span>));</div><div class="line">    CompletableFuture ex = CompletableFuture.supplyAsync(() -&gt; &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"runtime"</span>);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"is a done?"</span> +a.isDone()+<span class="string">". Is b done?"</span>+b.isDone()+<span class="string">"."</span>);</div><div class="line">    CompletableFuture future = CompletableFuture.anyOf(a,b,ex);</div><div class="line">    System.out.println(<span class="string">"is a done?"</span> +a.isDone()+<span class="string">". Is b done?"</span>+b.isDone()+<span class="string">"."</span>);</div><div class="line">    CompletableFuture exFuture = future.exceptionally( exp -&gt; &#123;</div><div class="line">        <span class="keyword">return</span> ((RuntimeException) exp).getMessage();</div><div class="line">    &#125;);</div><div class="line">    System.out.println(<span class="string">"done?"</span>+future.isDone()+<span class="string">" cancel?"</span>+future.isCancelled()+<span class="string">" exp?"</span>+future.isCompletedExceptionally());</div><div class="line">    System.out.println(<span class="string">"is a done?"</span> +a.isDone()+<span class="string">". Is b done?"</span>+b.isDone()+<span class="string">"."</span>);</div><div class="line">    System.out.println(exFuture.get());</div><div class="line">    System.out.println(<span class="string">"done?"</span>+future.isDone()+<span class="string">" cancel?"</span>+future.isCancelled()+<span class="string">" exp?"</span>+future.isCompletedExceptionally());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="completedFuture-æ–¹æ³•-1"><a href="#completedFuture-æ–¹æ³•-1" class="headerlink" title="completedFuture æ–¹æ³•"></a>completedFuture æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">base22</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * completedFuture æ–¹æ³•æ˜¯èƒ½å¤Ÿç›´æ¥å°†å€¼æ”¾å…¥ future å¯¹è±¡,å¸¸ç”¨äºæµ‹è¯•</div><div class="line">     * CompletableFutureå¯ä»¥åµŒå¥—</div><div class="line">     */</div><div class="line">    CompletableFuture future = CompletableFuture.completedFuture(<span class="number">1</span>);</div><div class="line">    CompletableFuture future1 = CompletableFuture.completedFuture(future);</div><div class="line">    CompletableFuture future2 = CompletableFuture.completedFuture(future1);</div><div class="line">    System.out.println(future2.get());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>è¿™ç¯‡è§£æå†™åˆ°è¿™é‡Œ,ä¸‹ä¸€æ¬¡æˆ‘ä¼šç®€å•è¯´æ˜ä¸€ä¸‹æœ‰å…³ java 8 ä¸­çš„å‡ ç§ lambda</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™å‡ å¤©ç¨å¾®èŠ±æ—¶é—´å­¦ä¹ äº†ä¸€ä¸‹ java 8 æä¾›çš„å¤„ç†å¼‚æ­¥è°ƒç”¨çš„ä¸€ä¸ª future ç±» &lt;code&gt;CompletableFuture&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹å‡½æ•°å¼çš„ future å¯¹è±¡.ç”¨æ¥è®©æˆ‘ä»¬æ›´åŠ ä¼˜é›…çš„ä½¿ç”¨å¼‚æ­¥è°ƒç”¨.&lt;/p&gt;
&lt;h1 id=&quot;ç®€è¿°&quot;&gt;&lt;a href=&quot;#ç®€è¿°&quot; class=&quot;headerlink&quot; title=&quot;ç®€è¿°&quot;&gt;&lt;/a&gt;ç®€è¿°&lt;/h1&gt;&lt;p&gt;&lt;code&gt;CompletableFuture&lt;/code&gt;æ˜¯&lt;code&gt;Future&lt;/code&gt;æ¥å£çš„å®ç°ç±».å†…éƒ¨åªæœ‰ä¸¤ä¸ªå±æ€§:&lt;code&gt;result&lt;/code&gt;å’Œ&lt;code&gt;stack&lt;/code&gt;ä¸¤ä¸ªå€¼,åˆ†åˆ«è¡¨ç¤ºå¯¹è±¡æ‰€å­˜å‚¨çš„å†…å®¹ä»¥åŠå¯¹è±¡ç°åœ¨çš„å®ŒæˆçŠ¶å†µ.&lt;/p&gt;
&lt;p&gt;ç”±äº&lt;code&gt;CompletableFuture&lt;/code&gt;ä¹Ÿæ˜¯ future å¯¹è±¡çš„ä¸€éƒ¨åˆ†,æ‰€ä»¥å®ƒä¹Ÿæœ‰ future çš„ç›¸å…³ç‰¹æ€§.åšä¸»åœ¨è¿™é‡Œè®¤ä¸ºå®ƒæœ€ç»ˆè¦çš„å†…å®¹å°±æ˜¯ä»–çš„æ‰§è¡Œæ—¶é—´,å°±æ˜¯:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;CompletableFuture åªåœ¨å¯¹è±¡åˆ›å»ºçš„æ—¶å€™æ‰å¼€å§‹å°è¯•æ‰§è¡Œ&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Future" scheme="http://yoursite.com/tags/Future/"/>
    
      <category term="lambda" scheme="http://yoursite.com/tags/lambda/"/>
    
  </entry>
  
  <entry>
    <title>Javaå¼‚æ­¥è°ƒç”¨2</title>
    <link href="http://yoursite.com/2017/05/03/Java%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A82/"/>
    <id>http://yoursite.com/2017/05/03/Javaå¼‚æ­¥è°ƒç”¨2/</id>
    <published>2017-05-03T10:29:32.000Z</published>
    <updated>2017-05-05T13:11:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€èŠ‚ <a href="/2017/04/26/Javaå¼‚æ­¥è°ƒç”¨1/" title="Javaå¼‚æ­¥è°ƒç”¨1">Javaå¼‚æ­¥è°ƒç”¨1</a> ä¸­ æˆ‘ä»¬æåˆ°äº†åœ¨éœ€è¦ä½¿ç”¨å¼‚æ­¥è°ƒç”¨çš„æƒ…å†µä¸‹å¦‚ä½•ä½¿ç”¨ <code>FutureTask</code> å·¥å…·è¿›è¡Œå¼‚æ­¥è°ƒç”¨,å¹¶ä¸”æç¤ºäº†ç›¸å…³ä»£ç </p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,æˆ‘ä»¬ä½¿ç”¨äº†<code>Callable</code>æ¥å£æ¥å®ç°äº†å¼‚æ­¥å·¥ä½œ.</p>
<p>ä½†æ˜¯åœ¨ Java 8 å¼€å§‹é¢‘ç¹ä½¿ç”¨çš„ç°åœ¨,æˆ‘ä»¬ç»å¸¸ä¼šè§‰å¾—è¿™ç§å®ç°æ–¹å¼æ¯”è¾ƒlow.</p>
<p>æ‰€ä»¥æœ¬èŠ‚æåˆ°äº†åœ¨ Java 8 çš„ç¯å¢ƒä¸‹å¦‚ä½•ä½¿ç”¨ lambda æ¥å®ç°å¼‚æ­¥æ“ä½œ.<br><a id="more"></a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å…ˆå»ºç«‹äº†ä¸€ä¸ªæ‹¥æœ‰äº”ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± </span></div><div class="line">ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</div><div class="line"><span class="comment">//åˆ†åˆ«å»ºç«‹äº†å¯¹åº”çš„äº”ä¸ªå¼‚æ­¥å¯¹è±¡,å¹¶ä¸”ä¼ å…¥ executor</span></div><div class="line">CompletableFuture&lt;JSONObject&gt; generalA = getGeneralFuture(receiver, MessageType.A,executorService);</div><div class="line">CompletableFuture&lt;JSONObject&gt; generalB = getGeneralFuture(receiver, MessageType.B,executorService);</div><div class="line">CompletableFuture&lt;JSONObject&gt; generalC = getGeneralFuture(receiver, MessageType.C,executorService);</div><div class="line">CompletableFuture&lt;JSONObject&gt; generalD = getGeneralFuture(receiver, MessageType.D,executorService);</div><div class="line">CompletableFuture&lt;JSONObject&gt; generalE = getGeneralFuture(receiver, MessageType.E,executorService);</div><div class="line"></div><div class="line"><span class="comment">//è·å–åˆ°äº”ä¸ªå¯¹åº”çš„å¼‚æ­¥ç»“æœ,æ—¶é—´å–å†³äºæœ€æ…¢çš„ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    response.put(<span class="string">"a_result"</span>, generalA.get());</div><div class="line">    response.put(<span class="string">"b_result"</span>, generalB.get());</div><div class="line">    response.put(<span class="string">"c_result"</span>, generalC.get());</div><div class="line">    response.put(<span class="string">"d_result"</span>, generalD.get());</div><div class="line">    response.put(<span class="string">"e_result"</span>, generalE.get());</div><div class="line">    <span class="keyword">return</span> response;</div><div class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">    <span class="comment">//åœ¨æ‰€æœ‰ç»“æŸæƒ…å½¢ä¸‹å…³é—­çº¿ç¨‹æ± ,å›æ”¶èµ„æº</span></div><div class="line">    executorService.shutdown();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯<code>getGeneralFuture</code>çš„ä»£ç ,</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ä¼ å…¥ä¸€ä¸ªlambdaå‡½æ•°æ¥å¤„ç†é€»è¾‘</span></div><div class="line"><span class="function"><span class="keyword">private</span> CompletableFuture&lt;JSONObject&gt; <span class="title">getGeneralFuture</span><span class="params">(String receiver , MessageType messageType,ExecutorService executorService)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> CompletableFuture.supplyAsync(() -&gt; &#123;</div><div class="line">        <span class="comment">//Do Something ....</span></div><div class="line">        <span class="keyword">return</span> messageJson;</div><div class="line">    &#125;,executorService);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ java 8 ä¸‹ä½¿ç”¨ lambda æ‰§è¡Œå¼‚æ­¥è°ƒç”¨å°±å®Œæˆäº†.</p>
<hr>
<p>å…³äºè¿™ä¸ªä¾‹å­æš‚æ—¶åˆ°è¿™é‡Œ,ä¹‹åæˆ‘ä»¬ä¼šç»§ç»­å­¦ä¹ æœ‰å…³<code>CompletableFuture</code>çš„å†…å®¹.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ä¸Šä¸€èŠ‚ &lt;a href=&quot;/2017/04/26/Javaå¼‚æ­¥è°ƒç”¨1/&quot; title=&quot;Javaå¼‚æ­¥è°ƒç”¨1&quot;&gt;Javaå¼‚æ­¥è°ƒç”¨1&lt;/a&gt; ä¸­ æˆ‘ä»¬æåˆ°äº†åœ¨éœ€è¦ä½¿ç”¨å¼‚æ­¥è°ƒç”¨çš„æƒ…å†µä¸‹å¦‚ä½•ä½¿ç”¨ &lt;code&gt;FutureTask&lt;/code&gt; å·¥å…·è¿›è¡Œå¼‚æ­¥è°ƒç”¨,å¹¶ä¸”æç¤ºäº†ç›¸å…³ä»£ç &lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,æˆ‘ä»¬ä½¿ç”¨äº†&lt;code&gt;Callable&lt;/code&gt;æ¥å£æ¥å®ç°äº†å¼‚æ­¥å·¥ä½œ.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯åœ¨ Java 8 å¼€å§‹é¢‘ç¹ä½¿ç”¨çš„ç°åœ¨,æˆ‘ä»¬ç»å¸¸ä¼šè§‰å¾—è¿™ç§å®ç°æ–¹å¼æ¯”è¾ƒlow.&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æœ¬èŠ‚æåˆ°äº†åœ¨ Java 8 çš„ç¯å¢ƒä¸‹å¦‚ä½•ä½¿ç”¨ lambda æ¥å®ç°å¼‚æ­¥æ“ä½œ.&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Future" scheme="http://yoursite.com/tags/Future/"/>
    
      <category term="lambda" scheme="http://yoursite.com/tags/lambda/"/>
    
      <category term="å¼‚æ­¥" scheme="http://yoursite.com/tags/%E5%BC%82%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>Javaå¼‚æ­¥è°ƒç”¨1</title>
    <link href="http://yoursite.com/2017/04/26/Java%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A81/"/>
    <id>http://yoursite.com/2017/04/26/Javaå¼‚æ­¥è°ƒç”¨1/</id>
    <published>2017-04-26T15:42:25.000Z</published>
    <updated>2017-05-05T13:11:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æˆ‘ä»¬å¯¹ Scala çš„ä½¿ç”¨è¿‡ç¨‹ä¹‹ä¸­.æˆ‘ä»¬ä¼šé¢‘ç¹çš„ç”¨åˆ°ä¸€ç±»æ–¹æ³•,ç§°ä¸º<em>å¼‚æ­¥æ–¹æ³•</em>.<br>åœ¨ Scala ä¸­ä¹Ÿæ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ <code>scala.concurrent.Future</code>.ä¸äº†è§£ç›¸å…³å†…å®¹çš„å¯ä»¥å»çœ‹ <code>Future</code> ç›¸å…³çš„åšå®¢.</p>
<p>é€šè¿‡å¯¹ <code>Future</code> æ–¹æ³•çš„è°ƒç”¨,æˆ‘ä»¬å¯ä»¥ç‰¹åˆ«ä¼˜é›…çš„æ–¹å¼å®ç°å¼‚æ­¥çš„è°ƒç”¨.ä¹Ÿå°±æ˜¯ç±»ä¼¼å¤šçº¿ç¨‹çš„ä½¿ç”¨.<br><a id="more"></a><br>åœ¨ Java ä¸­,ä»£ç å¤§éƒ¨åˆ†éƒ½æ˜¯åŒæ­¥æ‰§è¡Œçš„.ç®€å•çš„æ¥è¯´,å°±æ˜¯åšä¸€é¡¿é¥­æˆ‘å…ˆåˆ·é”…,å†æ·˜ç±³.ç­‰ç±³é¥­åšç†Ÿäº†å†å»æ´—ç¢—æ´—èœç‚’èœç››é¥­ç››èœæ‘†æ¡Œåƒé¥­.</p>
<p>æœ‰äº†å¼‚æ­¥æ–¹æ³•,æˆ‘ä»¬å°±å¯ä»¥åšåˆ°å…ˆåˆ·é”…åˆ·ç¢—,åœ¨æ·˜ç±³åšé¥­çš„ç©ºé—²åŠŸå¤«å»æ´—èœç‚’èœåšé¥­.å¤§å¤§èŠ‚çœæˆ‘ä»¬çš„ç¨‹åºçš„è¿è¡Œæ•ˆç‡.</p>
<p><code>FutureTask</code>æ˜¯<code>Future</code>æ¥å£çš„ä¸€ä¸ªå®ç°ç±»,å®ƒæ˜¯ä» Java 1.5 å¼€å§‹å¼•å…¥çš„.é€šè¿‡å®ƒèƒ½å¤Ÿæ§åˆ¶å®ƒçš„æ‰§è¡Œæ–¹æ³•çš„è¡Œä¸º.å…¶å…·ä½“çš„å†…å®¹æ˜¯é€šè¿‡ <code>Callable</code>æ¥å£æ¥å®ç°çš„.</p>
<blockquote>
<p><code>FutureTask</code>æœ‰7ä¸ªçŠ¶æ€,å…¶ä¸­æ•°å€¼ä»å°åˆ°å¤§:<br><code>NEW</code> <code>COMPLETING</code> <code>NORMAL</code> <code>EXCEPTIONAL</code> <code>CANCELLED</code> <code>INTERRUPTING</code> <code>INTERRUPTED</code><br>å…¶ä¸­,çŠ¶æ€æœ‰å‡ ä¸ªå¯èƒ½çš„æµè½¬æ–¹å¼:</p>
<ol>
<li>æ–°å»º -&gt; å®Œæˆä¸­ -&gt; æ™®é€š</li>
<li>æ–°å»º -&gt; å®Œæˆä¸­ -&gt; å¼‚å¸¸</li>
<li>æ–°å»º -&gt; å–æ¶ˆ</li>
<li>æ–°å»º -&gt; æ‰“æ–­ä¸­ -&gt; æ‰“æ–­</li>
</ol>
<p><code>FutureTask</code> æœ‰è®¸å¤šæ–¹æ³•,åŒ…æ‹¬:</p>
<ul>
<li><code>isCancelled</code> æ–¹æ³• : è¿”å›æ˜¯å¦å–æ¶ˆ(å½“çŠ¶æ€æ˜¯åé¢ä¸‰ç§æƒ…å†µæ—¶)</li>
<li><code>isDone</code> æ–¹æ³• : è¿”å›æ˜¯å¦å¤„ç†(å½“çŠ¶æ€ä¸æ˜¯æ–°å»ºæ—¶)</li>
<li><code>cancel</code> æ–¹æ³• : è¯•å›¾å–æ¶ˆæ–¹æ³•(çŠ¶æ€å¯èƒ½å˜æˆå–æ¶ˆæˆ–è€…è¢«æ‰“æ–­)</li>
<li><code>get</code> æ–¹æ³• : è·å–åˆ°æ–¹æ³•çš„è¿”å›å€¼,å¦‚æœä¼ å…¥äº†æ—¶é—´å¹¶ä¸”è¶…æ—¶çš„è¯ä¼šæŠ›å‡ºå¼‚å¸¸</li>
</ul>
</blockquote>
<p><code>FutureTask</code>çš„æ„é€ å™¨ä¼ å…¥ä¸€ä¸ª <code>Callable</code> å¯¹è±¡,å®ƒå’Œ <code>Runnable</code> çš„ä¸»è¦åŒºåˆ«æ˜¯:</p>
<table>
<thead>
<tr>
<th><code>Callable</code></th>
<th><code>Runnable</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>å®ç° <code>call</code> æ–¹æ³•</td>
<td>å®ç° <code>run</code> æ–¹æ³•</td>
</tr>
<tr>
<td>å¯è·å¾—è¿”å›ç»“æœ</td>
<td>ä¸èƒ½ç›´æ¥è·å¾—ç»“æœ</td>
</tr>
<tr>
<td>å¯ä»¥æŠ›å‡ºå¼‚å¸¸</td>
<td>ä¸èƒ½æŠ›å‡ºå¼‚å¸¸</td>
</tr>
</tbody>
</table>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç›´æ¥çœ‹ä»£ç å®ç°;</p>
<p>é¦–å…ˆæˆ‘æœ‰äº”ä¸ªè·å–å¯¹åº”çš„ä¿¡æ¯çš„æ–¹æ³•<code>getGeneral</code>.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å…ˆå»ºç«‹äº†ä¸€ä¸ªæ‹¥æœ‰äº”ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± </span></div><div class="line">ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</div><div class="line"><span class="comment">//åˆ†åˆ«å»ºç«‹äº†å¯¹åº”çš„äº”ä¸ªå¼‚æ­¥å¯¹è±¡</span></div><div class="line">FutureTask&lt;JSONObject&gt; generalA = getGeneral(receiver, MessageType.A);</div><div class="line">FutureTask&lt;JSONObject&gt; generalB = getGeneral(receiver, MessageType.B);</div><div class="line">FutureTask&lt;JSONObject&gt; generalC = getGeneral(receiver, MessageType.C);</div><div class="line">FutureTask&lt;JSONObject&gt; generalD = getGeneral(receiver, MessageType.D);</div><div class="line">FutureTask&lt;JSONObject&gt; generalE = getGeneral(receiver, MessageType.E);</div><div class="line"><span class="comment">//å¯¹äº”ä¸ªå¼‚æ­¥å¯¹è±¡è¿›è¡Œæ‰§è¡Œ</span></div><div class="line">executorService.execute(generalA);</div><div class="line">executorService.execute(generalB);</div><div class="line">executorService.execute(generalC);</div><div class="line">executorService.execute(generalD);</div><div class="line">executorService.execute(generalE);</div><div class="line"><span class="comment">//è·å–åˆ°äº”ä¸ªå¯¹åº”çš„å¼‚æ­¥ç»“æœ,æ—¶é—´å–å†³äºæœ€æ…¢çš„ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    response.put(<span class="string">"a_result"</span>, generalA.get());</div><div class="line">    response.put(<span class="string">"b_result"</span>, generalB.get());</div><div class="line">    response.put(<span class="string">"c_result"</span>, generalC.get());</div><div class="line">    response.put(<span class="string">"d_result"</span>, generalD.get());</div><div class="line">    response.put(<span class="string">"e_result"</span>, generalE.get());</div><div class="line">    <span class="keyword">return</span> response;</div><div class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">    <span class="comment">//åœ¨æ‰€æœ‰ç»“æŸæƒ…å½¢ä¸‹å…³é—­çº¿ç¨‹æ± ,å›æ”¶èµ„æº</span></div><div class="line">    executorService.shutdown();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯<code>getGeneral</code>çš„ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> FutureTask&lt;JSONObject&gt; <span class="title">getGeneral</span><span class="params">(String receiver, MessageType messageType)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FutureTask&lt;JSONObject&gt;(<span class="keyword">new</span> Callable&lt;JSONObject&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> JSONObject <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">            <span class="comment">//Do Something ....</span></div><div class="line">            <span class="keyword">return</span> messageJson;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å®Œæˆäº†æˆ‘ä»¬çš„äº”ç»„å¼‚æ­¥è°ƒç”¨.</p>
<hr>
<p>å¼‚æ­¥æ–¹é¢æˆ‘æš‚ä¸”ä¹Ÿå­¦åˆ°è¿™é‡Œ,å°†æ¥æœ‰æœºä¼šç»§ç»­æ›´æ–°æœ‰å…³å¼‚æ­¥çš„å†…å®¹.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨æˆ‘ä»¬å¯¹ Scala çš„ä½¿ç”¨è¿‡ç¨‹ä¹‹ä¸­.æˆ‘ä»¬ä¼šé¢‘ç¹çš„ç”¨åˆ°ä¸€ç±»æ–¹æ³•,ç§°ä¸º&lt;em&gt;å¼‚æ­¥æ–¹æ³•&lt;/em&gt;.&lt;br&gt;åœ¨ Scala ä¸­ä¹Ÿæ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ &lt;code&gt;scala.concurrent.Future&lt;/code&gt;.ä¸äº†è§£ç›¸å…³å†…å®¹çš„å¯ä»¥å»çœ‹ &lt;code&gt;Future&lt;/code&gt; ç›¸å…³çš„åšå®¢.&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¯¹ &lt;code&gt;Future&lt;/code&gt; æ–¹æ³•çš„è°ƒç”¨,æˆ‘ä»¬å¯ä»¥ç‰¹åˆ«ä¼˜é›…çš„æ–¹å¼å®ç°å¼‚æ­¥çš„è°ƒç”¨.ä¹Ÿå°±æ˜¯ç±»ä¼¼å¤šçº¿ç¨‹çš„ä½¿ç”¨.&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Future" scheme="http://yoursite.com/tags/Future/"/>
    
      <category term="å¼‚æ­¥" scheme="http://yoursite.com/tags/%E5%BC%82%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>å½“ Java é‡åˆ° Scala ä¸­çš„ Seq å¯¹è±¡</title>
    <link href="http://yoursite.com/2017/04/25/%E5%BD%93-java-%E4%B8%AD%E9%81%87%E5%88%B0-scala-%E4%B8%AD%E7%9A%84-Seq-%E5%AF%B9%E8%B1%A1/"/>
    <id>http://yoursite.com/2017/04/25/å½“-java-ä¸­é‡åˆ°-scala-ä¸­çš„-Seq-å¯¹è±¡/</id>
    <published>2017-04-25T15:31:46.000Z</published>
    <updated>2017-05-05T13:10:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„æƒ…å†µ.<br>æˆ‘ä»¬éƒ½çŸ¥é“ java å’Œ scala ä»£ç ç”±äºæ˜¯åŸºäºåŒä¸€å¥— jvm ç¯å¢ƒä¸Šè¿è¡Œçš„è¯­è¨€.æ‰€ä»¥åœ¨ä»£ç ä¸­æ˜¯å¯ä»¥äº’ç›¸è°ƒç”¨çš„.æ‰€ä»¥ä»Šå¤©åœ¨è°ƒç”¨åŒäº‹å†™çš„ä»£ç çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜.<br><a id="more"></a><br>é¦–å…ˆ,ä»–ä¼ ç»™äº†æˆ‘ä¸€ä¸ª scala çš„ case class å¯¹è±¡:<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderEvent</span>(<span class="params">products: <span class="type">Seq</span>[<span class="type">ProductInfo</span>]</span>)</span></div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªè®¢å•å¯¹è±¡é‡Œæœ‰å¯¹åº”çš„äº§å“åˆ—è¡¨.<br>äºæ˜¯æœ‰æ„æ€çš„äº‹æƒ…å‡ºç°äº†.å½“æˆ‘è·å–åˆ°äº†å¯¹åº”çš„äº§å“åˆ—è¡¨ä¹‹å:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">event.products()</div><div class="line"><span class="comment">//è¿”å›ç±»å‹:scala.collection.Seq&lt;ProductInfo&gt;</span></div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘åœ¨è·å¾—åˆ°çš„å¯¹è±¡ä¸­è·å–å¯¹åº”çš„æ–¹æ³•èƒ½å¤Ÿè·å–éå¸¸å¤šçš„æ–¹æ³•.åŒ…æ‹¬<code>Seq</code> ä¸­éå¸¸å¸¸è§çš„ <code>map</code>,<code>flatMap</code>,<code>forEach</code>,<code>filter</code>ç­‰æ–¹æ³•.ä½†æ˜¯,äº‹å®è¯æ˜,è¿™ä¸å¤ªå¥½ç”¨.è™½ç„¶ java8 ä¸­å·²ç»æ”¯æŒäº†å‡½æ•°å¼ç¼–ç¨‹.ä½†æ˜¯æ˜¾ç„¶è¿˜ä¸èƒ½å¤Ÿæ”¯æŒ scala ä¸­çš„é›†åˆæ–¹æ³•.</p>
<p>æ‰€ä»¥æˆ‘åˆæŠŠç›®æ ‡è½¬åˆ°äº†è½¬æ¢ç±»å‹æ–¹æ³•ä¸­å».<br>äºæ˜¯æˆ‘åˆå‘ç°äº†<code>toList</code>æ–¹æ³•,ä½†æ˜¯å¾ˆé—æ†¾çš„æ˜¯.æˆ‘è·å¾—åˆ°äº† scala ä¸­çš„ <code>List</code>, ä»ç„¶ä¸èƒ½æ­£å¸¸çš„ä½¿ç”¨.ä» java ä¸­æ‰¾åˆ° scala ä¸­çš„ <code>as[]</code> æ–¹æ³•ä»¥åŠ<code>toJava</code> æ–¹æ³•æ˜¾ç„¶ä¹Ÿæœ‰äº›å¼‚æƒ³å¤©å¼€.</p>
<p>æœ€åæˆ‘åªèƒ½ä»æ–¹æ³•ä¸­æ‰¾åˆ°äº†ä¸€ä¸ª<code>iterator</code>æ–¹æ³•,ä»–å¯ä»¥è·å¾—ä¸€ä¸ª<code>Iterator</code>å¯¹è±¡.å½“ç„¶â€¦è¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯ scala ä¸­çš„.ä¸è¿‡å®ƒåŒæ—¶å…·æœ‰çš„ <code>hasNext</code> æ–¹æ³•ä»¥åŠ <code>next</code> æ–¹æ³•ä¸ºæˆ‘æä¾›äº†ä¸€ä¸ªwhileå¾ªç¯çš„å¯èƒ½æ€§.</p>
<hr>
<p>è¿™ä¸ªé—®é¢˜ç›®å‰æ²¡æœ‰ç»“æŸ,æ—¥åæˆ‘ä¼šç»§ç»­å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œç ”ç©¶.æœŸå¾…ä¸‹ä¸€ç¯‡èƒ½å¤Ÿè§£å†³æ­¤é—®é¢˜</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„æƒ…å†µ.&lt;br&gt;æˆ‘ä»¬éƒ½çŸ¥é“ java å’Œ scala ä»£ç ç”±äºæ˜¯åŸºäºåŒä¸€å¥— jvm ç¯å¢ƒä¸Šè¿è¡Œçš„è¯­è¨€.æ‰€ä»¥åœ¨ä»£ç ä¸­æ˜¯å¯ä»¥äº’ç›¸è°ƒç”¨çš„.æ‰€ä»¥ä»Šå¤©åœ¨è°ƒç”¨åŒäº‹å†™çš„ä»£ç çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜.&lt;br&gt;
    
    </summary>
    
      <category term="Java_Scala" scheme="http://yoursite.com/categories/Java-Scala/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Scala" scheme="http://yoursite.com/tags/Scala/"/>
    
      <category term="Seq" scheme="http://yoursite.com/tags/Seq/"/>
    
  </entry>
  
  <entry>
    <title>è´§å¸é‡‘é¢è®¡ç®—</title>
    <link href="http://yoursite.com/2017/04/25/%E8%B4%A7%E5%B8%81%E9%87%91%E9%A2%9D%E8%AE%A1%E7%AE%97/"/>
    <id>http://yoursite.com/2017/04/25/è´§å¸é‡‘é¢è®¡ç®—/</id>
    <published>2017-04-25T15:06:04.000Z</published>
    <updated>2017-05-05T13:11:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>å•†ä¸šç”¨é€”ä¹‹ä¸­,æˆ‘ä»¬ç»å¸¸å‡ºç°å¯¹äºæ•°å­—çš„é‡‘é¢çš„å¤„ç†.</p>
<p>æ¯”å¦‚é‡‘é¢<em>ä¸€ä¸‡ä¸‰åƒå…ƒé›¶ä¸¤å—å››æ¯›</em>,æ•°å­—å†™ä½œ<code>13000.24</code>, ä½†æ˜¯åœ¨æ˜¾ç¤ºçš„å¤„ç†ä»¥åŠåœ¨ä¼šè®¡çš„è®¡ç®—ä¸­,ç»å¸¸ä¼šä½¿ç”¨ä¼šè®¡å†™æ³•<code>13,000.24</code>.æ‰€ä»¥æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æ•°å­—ç›´æ¥è½¬æ¢ä¸ºæ­¤ç±»è¡¨ç¤ºå½¢å¼<br><a id="more"></a><br>æ‰€ä»¥ä»Šå¤©æ¶‰åŠåˆ°äº†<code>java.text.NumberFormat</code>ç±».<br>ä¸¾ä¸ªæ —å­:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">BigDecimal money = <span class="keyword">new</span> BigDecimal(<span class="string">"1021380124.127"</span>);</div><div class="line">NumberFormat format = NumberFormat.getCurrencyInstance();</div><div class="line">System.out.println(format.format(money));   <span class="comment">//ï¿¥1,021,380,124.127</span></div></pre></td></tr></table></figure></p>
<p>é’ˆå¯¹<code>getCurrencyInstance</code>æ–¹æ³•, format æ–¹æ³•èƒ½å¤Ÿå°†ä¼ å…¥çš„æ•°å­—è½¬æ¢æˆé‡‘é¢æ ¼å¼,å¹¶ä¸”è½¬æ¢æˆé‡‘é¢çš„æ˜¾ç¤ºæ–¹å¼å¹¶åœ¨å‰é¢åŠ ä¸Šäººæ°‘å¸æ ‡è¯†ç¬¦.</p>
<p>å½“ç„¶æˆ‘ä»¬è¿˜æœ‰æœ€å¸¸è§„çš„æ¨¡å¼:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">BigDecimal money = <span class="keyword">new</span> BigDecimal(<span class="string">"1021380124.127"</span>);</div><div class="line">NumberFormat format = NumberFormat.getNumberInstance();</div><div class="line">System.out.println(format.format(money));   <span class="comment">//1,021,380,124.127</span></div></pre></td></tr></table></figure></p>
<p><code>getNumberInstance</code>æ–¹æ³•ä¼šå¯¹æ•°å­—è¿›è¡Œæ­£å¸¸çš„æ ¼å¼åˆ’åˆ†;<br>è€Œ<code>getIntegerInstance</code>æ–¹æ³•ä¼šå¯¹æ•°å­—è¿›è¡Œæ•´æ•°çš„å››èˆäº”å…¥:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">BigDecimal money = <span class="keyword">new</span> BigDecimal(<span class="string">"1021380124.127"</span>);</div><div class="line">NumberFormat format = NumberFormat.getIntegerInstance();</div><div class="line">System.out.println(format.format(money));   <span class="comment">//1,021,380,124</span></div></pre></td></tr></table></figure></p>
<p>é™¤äº†è¿™äº›<code>format</code> æ–¹æ³•å…è®¸ä¼ å…¥å¤šç§ç±»å‹çš„å‚æ•°,æ¯”å¦‚æ•´å½¢, double,long, ä»¥åŠä¸€äº› object ç±»å‹.æ¯”å¦‚ BigDecimal.<br>ä½†æ˜¯æ— æ³•å¤„ç†å­—ç¬¦ä¸²ç±»å‹,å¦‚æœä¼ å…¥å­—ç¬¦ä¸²ç±»å‹å°±ä¼šæŠ›å‡ºå¼‚å¸¸<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java.lang.IllegalArgumentException: Cannot format given Object as a Number</div></pre></td></tr></table></figure></p>
<hr>
<p>é’ˆå¯¹æ­¤æ–¹æ³•ä¹‹åè¿˜ä¼šè¿›ä¸€æ­¥çš„å­¦ä¹ ,å±Šæ—¶å°†ä¼šè¿›ä¸€æ­¥æ›´æ–°æ­¤ç›®å½•</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å•†ä¸šç”¨é€”ä¹‹ä¸­,æˆ‘ä»¬ç»å¸¸å‡ºç°å¯¹äºæ•°å­—çš„é‡‘é¢çš„å¤„ç†.&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚é‡‘é¢&lt;em&gt;ä¸€ä¸‡ä¸‰åƒå…ƒé›¶ä¸¤å—å››æ¯›&lt;/em&gt;,æ•°å­—å†™ä½œ&lt;code&gt;13000.24&lt;/code&gt;, ä½†æ˜¯åœ¨æ˜¾ç¤ºçš„å¤„ç†ä»¥åŠåœ¨ä¼šè®¡çš„è®¡ç®—ä¸­,ç»å¸¸ä¼šä½¿ç”¨ä¼šè®¡å†™æ³•&lt;code&gt;13,000.24&lt;/code&gt;.æ‰€ä»¥æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æ•°å­—ç›´æ¥è½¬æ¢ä¸ºæ­¤ç±»è¡¨ç¤ºå½¢å¼&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="é‡‘é¢" scheme="http://yoursite.com/tags/%E9%87%91%E9%A2%9D/"/>
    
      <category term="BigDecimal" scheme="http://yoursite.com/tags/BigDecimal/"/>
    
  </entry>
  
</feed>
